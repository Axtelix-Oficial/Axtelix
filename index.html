<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Axtelix | Premium Store</title>
    <link rel="icon" type="image/x-icon" href="logo-wp.jpeg">

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <meta property="og:type" content="website">
    <meta property="og:title" content="Axtelix | Premium Store">
    <meta property="og:description" content="Tu tienda premium de perfumer√≠a y accesorios. Calidad garantizada.">
    <meta property="og:image" content="https://axtelix-oficial.github.io/Axtelix/logo-wp.jpeg">
    <meta property="og:url" content="https://axtelix-oficial.github.io/Axtelix/">
    <meta name="twitter:card" content="summary_large_image">


    <style>

        html { scroll-behavior: smooth; }

        body {
            background-color: #0a0a0a;
            color: #ffffff;
            font-family: 'Helvetica', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: auto;
        }

        #social-proof {
    position: fixed;
    bottom: 20px;
    left: -300px; /* Escondido al inicio */
    background: rgba(20, 20, 20, 0.9);
    border-left: 4px solid #d4af37;
    color: white;
    padding: 12px;
    border-radius: 5px;
    font-size: 0.8rem;
    z-index: 9999;
    transition: left 0.5s ease-in-out;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
}

        /* Estado Agotado */
        .product-card.sold-out {
            opacity: 0.7;
            filter: grayscale(0.8);
            pointer-events: none; /* Evita que sigan dando clic */
        }

        .badge-agotado {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
            background: #444; /* Gris oscuro para diferenciar de la oferta roja */
            color: white;
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
            transform: skewX(7deg); /* Para que el texto se vea derecho en la tarjeta ladeada */
        }

        /* Estilo del bot√≥n cuando est√° agotado */
        .product-card.sold-out .btn-add-cart {
            background-color: #333 !important;
            color: #777 !important;
            cursor: not-allowed;
        }


        /* Clase para ocultar productos en el buscador */
        .product-card.hidden {
            display: none !important;
        }


        /* --- SMART LIFE GEAR (AHORA DEBAJO DE AXTELIX) --- */
        .slogan-animado {
            font-size: 0.7em;
            color: #888;
            letter-spacing: 2px;
            display: block; /* Cambiado a block para estar debajo */
            margin-top: 5px;
            transition: all 0.5s ease;
            cursor: default;
        }

        .slogan-animado:hover {
            letter-spacing: 6px;
            color: #d4af37;
        }

        .slogan-animado span {
            display: inline-block;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slogan-animado:hover span {
            animation: salto-giro-completo 0.8s ease forwards, 
                       parpadeo-contorno 1s infinite alternate;
        }

        @keyframes salto-giro-completo {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }

        @keyframes parpadeo-contorno {
            from { text-shadow: 0 0 2px #fff, 0 0 5px #d4af37; }
            to { text-shadow: 0 0 8px #d4af37, 0 0 15px #d4af37; }
        }

        header {
            padding: 40px 20px 10px 20px;
            text-align: center;
            text-transform: uppercase;
        }

        header h1 {
            display: inline-block;
            margin: 0;
            padding: 5px 30px;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            letter-spacing: 5px;
            border-radius: 50px;
            position: relative;
        }

        header h1:hover {
            letter-spacing: 15px; 
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.8);
            color: #d4af37;
            animation: glow-pulse 1.5s infinite;
        }

        @keyframes glow-pulse {
            0% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }
            50% { box-shadow: 0 0 40px rgba(212, 175, 55, 0.9); }
            100% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }
        }

        /* --- BUSCADOR CON LUPA FELIZ --- */
        .search-wrapper {
            max-width: 400px;
            margin: 20px auto;
            position: relative;
            padding: 0 20px;
        }

        #productSearch {
            width: 100%;
            padding: 12px 15px;
            border-radius: 25px;
            border: 1px solid #333;
            background: #1a1a1a;
            color: white;
            outline: none;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #productSearch:focus { 
            border-color: #d4af37;
            letter-spacing: 1px;
        }

        .lupa-emoji {
            position: absolute;
            right: 35px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            display: inline-block;
            transition: all 0.3s;
        }

        /* Animaci√≥n de la lupa al dar click */
        .lupa-feliz {
            animation: salto-giro-lupa 0.7s ease-out forwards;
        }

        @keyframes salto-giro-lupa {
            0% { transform: translateY(-50%) scale(1) rotate(0deg); }
            30% { transform: translateY(-100%) scale(1.5) rotate(0deg); }
            100% { transform: translateY(-50%) scale(1) rotate(360deg); }
        }

        /* --- CARRITO Y BOTONES DENTRO DEL MODAL --- */
        .cupon-wrapper:hover {
            border-color: #d4af37;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            transition: 0.3s;
        }

        .btn-cupon:hover {
            animation: parpadeo-contorno 1s infinite alternate;
        }

        .btn-whatsapp-cart {
            background: #25d366;
            color: white;
            width: 100%;
            padding: 15px;
            border: 1px solid transparent;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 0px;
        }

        /* Efecto de letras separadas y brillo suave */
        .btn-whatsapp-cart:hover {
            letter-spacing: 2px;
            background: #20ba5a;
            box-shadow: 0 0 15px rgba(37, 211, 102, 0.5);
            border-color: #fff;
        }


        /* Estilos para botones en mantenimiento */
.btn-mantenimiento {
    background: #e0e0e0 !important;
    color: #888 !important;
    cursor: not-allowed !important;
    position: relative;
    pointer-events: none; /* Evita que hagan clic */
}

.badge-mantenimiento {
    position: absolute;
    top: -8px;
    right: 10px;
    background: #ff4444;
    color: white;
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: bold;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Dise√±o de tarjeta bancaria profesional */
.banco-card {
    background: #f8f9fa;
    border: 1.5px dashed #ccc;
    border-radius: 15px;
    padding: 15px;
    margin-top: 10px;
    text-align: left;
}

.banco-dato {
    display: block;
    font-size: 13px;
    margin-bottom: 5px;
}

.banco-valor {
    font-family: monospace;
    font-size: 15px;
    font-weight: bold;
    color: #111;
}



        /* --- CATEGOR√çAS Y PRODUCTOS --- */
        .category-title {
            text-align: center;
            letter-spacing: 3px;
            margin-top: 40px;
            color: #d4af37;
            text-transform: uppercase;
            font-size: 1.1em;
            transition: all 0.4s ease;
            cursor: default;
        }

        .category-title:hover {
            letter-spacing: 8px;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .cart-icon-fixed {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #d4af37;
            color: black;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
            transition: transform 0.2s;
        }

        .cart-pop {
            animation: pop-animation 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #ffffff !important; 
        }

        @keyframes pop-animation {
            0% { transform: scale(1); }
            50% { transform: scale(1.6); box-shadow: 0 0 40px #d4af37; }
            100% { transform: scale(1); }
        }


        @media (max-width: 768px) {
    .container {
        overflow-x: auto; 
        /* 'mandatory' obliga a que el scroll se detenga en un producto s√≠ o s√≠ */
        scroll-snap-type: x mandatory; 
        -webkit-overflow-scrolling: touch; 
        gap: 15px;
        padding: 10px;
        /* IMPORTANTE: El contenedor debe tener el scroll oculto si usas flechas, 
           o auto si quieres que usen el dedo */
    }

    @media (max-width: 768px) {
    .product-card {
        /* Subimos del 85% al 92% para que ocupe casi toda la pantalla */
        flex: 0 0 92% !important; 
        min-width: 92% !important;
        
        /* Aseg√∫rate de que el margen no las empuje */
        margin: 0 auto; 
        
        scroll-snap-align: center;
        scroll-snap-stop: always;
    }
}
    
    .arrow-btn {
        display: none; /* En m√≥vil es mejor usar el dedo, pero si las dejas, 
                          el JS que te pas√© antes har√° el salto exacto */
    }
}


/* Esto hace que el efecto funcione con el mouse Y TAMBI√âN con la clase .active */

/* El Borde Dorado */
.product-card.active::before, 
.product-card:hover::before {
    clip-path: inset(0 0 0 0) !important;
}

/* La Imagen (Color y brillo) */
.product-card.active img,
.product-card:hover img {
    filter: grayscale(0%) brightness(100%) !important;
}

/* El texto o bot√≥n (si quieres que cambie) */
.product-card.active .btn-add-cart {
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
}


        .slider-wrapper {
            position: relative;
            width: 90%;
            max-width: 1100px;
            margin: 0 auto 40px auto;
            display: flex;
            align-items: center;
        }

        .container {
            display: flex;
            overflow-x: hidden;
            gap: 20px;
            padding: 20px 0;
            width: 100%;
        }

        /* 1. Contenedor: Solo 3 productos visibles con buen espacio */
        .product-grid {
            display: flex;
            gap: 80px; /* Mucho espacio para que no se peguen los rayos */
            justify-content: center;
            padding: 60px 20px;
        }

        /* 1. LA TARJETA: Le quitamos el clip-path y el overflow:hidden */
        .product-card {
            flex: 0 0 300px;
            height: 520px; /* Dale un poco m√°s de altura para que quepa todo abajo */
            position: relative;
            background: transparent; /* Para que el fondo no tape nada */
            overflow: visible; /* IMPORTANTE: para que la oferta y botones se vean */
            transition: all 0.5s ease;
        }

        /* 1.1 EL BORDE DORADO DE CARGA */
        .product-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border: 2px solid #f1c40f;
            z-index: 10;
            pointer-events: none;
            clip-path: inset(0 100% 100% 0);
            transition: clip-path 0.7s ease-in-out;
        }

        .product-card:hover::before {
            clip-path: inset(0 0 0 0);
        }

        .product-card:hover img {
            filter: grayscale(0%) brightness(100%);
        }

        /* 2. LA IMAGEN: Aqu√≠ es donde aplicamos el recorte de Rayo */
        .product-card img {
            width: 100%;
            height: 300px; /* Ajusta la altura de la foto */
            object-fit: cover;
            /* Movemos el recorte de rayo solo a la foto */
            clip-path: polygon(0% 0%, 100% 0%, 100% 80%, 50% 100%, 0% 80%);
            filter: grayscale(100%) brightness(30%);
            transition: all 0.6s ease;
        }

        .product-card:hover img {
            filter: grayscale(0%) brightness(100%);
        }

        /* 3. MOVER LA OFERTA PARA QUE NO TAPE EL NOMBRE */
        .badge-oferta {
            position: absolute;
            top: -10px; /* S√∫bela arriba de la foto */
            left: 10px;
            z-index: 50; 
            background: #ff4d4d;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.7rem;
            color: white;
        }

        /* 4. BOT√ìN Y DETALLES: Aseg√∫rate que no tengan posici√≥n absoluta rara */
        .product-info {
            padding-top: 15px; /* Espacio despu√©s del rayo de la foto */
            text-align: center;
        }

        .a√±adir-carrito {
            display: block;
            margin: 10px auto;
            background: white;
            color: black;
            padding: 8px 15px;
            border: none;
            cursor: pointer;
        }

        .product-info h3 {
            font-size: 0.9rem;
            color: #f1c40f; /* Dorado para el nombre */
        }

        /* --- AJUSTE FINAL PARA M√ìVIL (TODO CENTRADO Y ADAPTADO) --- */
@media (max-width: 768px) {
    /* 1. PRODUCTOS: Recuadros centrados */
    .product-grid {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        gap: 25px !important;
        padding: 10px 0 !important;
        overflow-x: hidden !important;
    }

    .product-card {
        width: 90% !important; 
        flex: none !important;
        margin: 0 auto !important;
    }

    /* 2. CHECKOUT: Centrado y con m√°rgenes iguales */
    #capa-checkout {
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        padding: 0 !important;
    }

    #capa-checkout > div {
        width: 90% !important; /* Margen igual en ambos lados */
        margin: 0 auto !important;
        padding: 20px 15px !important;
        max-height: 88vh !important;
        overflow-y: auto !important;
        border-radius: 20px !important;
        box-sizing: border-box !important;
    }

    /* Inputs y botones del Checkout */
    #capa-checkout input, #capa-checkout textarea, #btn-next-step, #btn-wsp, #btn-descargar-img {
        width: 100% !important;
        box-sizing: border-box !important;
        font-size: 16px !important;
    }

    /* 3. MANTENIMIENTO: El arreglo para que se vea igual de los dos lados */
    #aviso-mantenimiento {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 0 !important;
        margin: 0 !important;
        z-index: 20000000 !important;
    }

    #aviso-mantenimiento > div {
        width: 85% !important; /* Se adapta al centro con m√°rgenes iguales */
        max-width: 350px !important;
        margin: 0 auto !important; /* Esto asegura que se vea igual de los dos lados */
        padding: 30px 20px !important;
        border-radius: 24px !important;
        box-sizing: border-box !important;
        text-align: center !important;
    }
}

        .badge-oferta {
            position: absolute;
            /* 1. S√∫bela m√°s para que salga del √°rea del nombre */
            top: -15px; 
    
            /* 2. Mu√©vela a la izquierda o derecha seg√∫n prefieras */
            left: 10px; 
    
            /* 3. Aseg√∫rate de que nada la tape */
            z-index: 100; 
    
            /* Opcional: un sombreado para que resalte en el fondo negro */
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
    
            /* Estilo visual r√°pido */
            background-color: #ff4d4d;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
        }

        .price { color: #d4af37; font-size: 1.2em; font-weight: bold; display: block; margin-bottom: 10px; }
        
        .old-price {
            text-decoration: line-through;
            color: #666;
            font-size: 0.8em;
            margin-right: 8px;
        }

        .btn-add-cart {
            display: inline-block;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #000;
            font-weight: bold;
            font-size: 0.75em;
            text-transform: uppercase;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }


        .estrella-ambiente {
    position: absolute;
    pointer-events: none; /* Para que no interfieran con los clics */
    z-index: -1; /* Detr√°s de todo */
    opacity: 0;
    color: #FFD700; /* Color dorado brillante para las estrellas */
    font-size: 1.5rem; /* Tama√±o inicial */
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.7); /* Brillo alrededor */
    transition: opacity 2s ease-in-out, transform 2s ease-in-out;
    user-select: none;
    line-height: 1; /* Para que no ocupe mucho espacio vertical */
}

/* Animaci√≥n de una estrella que aparece, flota y se desvanece */
@keyframes estrellaFlotante {
    0% {
        opacity: 0;
        transform: translate(0, 0) scale(0.5) rotate(0deg);
    }
    30% {
        opacity: 0.7; /* Se ve m√°s al inicio */
    }
    70% {
        opacity: 0.4;
    }
    100% {
        opacity: 0;
        transform: translate(var(--float-x), var(--float-y)) scale(1.5) rotate(360deg);
    }
}



        .btn-add-cart:active {
            transform: scale(0.95);
            background-color: #d4af37;
        }

        .btn-details {
            background: transparent;
            color: #888;
            border: none;
            text-decoration: underline;
            font-size: 0.8em;
            cursor: pointer;
            margin-bottom: 10px;
        }

        /* 1. Animaci√≥n de parpadeo que NUNCA se detiene */
@keyframes breathing {
    0%, 100% {
        opacity: 0.2;
        transform: scale(1);
    }
    50% {
        opacity: 1;
        transform: scale(1.05); /* Un pulso muy sutil */
    }
}

.arrow-btn {
    background: transparent;
    color: #d4af37;
    border: none;
    font-size: 4.5rem; /* Un poco m√°s grandes como pediste */
    font-weight: 100;
    cursor: pointer;
    z-index: 100;
    outline: none;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    
    /* La animaci√≥n se mantiene SIEMPRE activa */
    animation: breathing 2.5s infinite ease-in-out;
    
    /* Transici√≥n suave para cuando le piques */
    transition: transform 0.1s ease, color 0.1s ease;
}

/* 2. EFECTO DE HUNDIDO (Cuando le picas) */
/* El !important asegura que le gane a la animaci√≥n de parpadeo por un momento */
.arrow-btn:active {
    transform: scale(0.85) !important; /* Se hace peque√±a (se hunde) */
    color: #fff !important; /* Destello blanco al presionar */
    opacity: 1 !important;
}

/* 3. Evitamos que el hover detenga la animaci√≥n */
.arrow-btn:hover {
    /* Quitamos el play-state: paused para que siga parpadeando mientras decides */
    color: #d4af37; 
}

/* Posicionamiento */
.arrow-btn.prev { left: -5px; }
.arrow-btn.next { right: -5px; }

        .trust-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 40px 20px;
            background: #0f0f0f;
            text-align: center;
            margin-top: 50px;
        }
        .trust-item { flex: 1; min-width: 200px; padding: 20px; }
        .trust-item h4 { color: #d4af37; font-size: 0.9em; margin-bottom: 10px; }
        .trust-item p { color: #888; font-size: 0.8em; }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.95);
        }

        .modal-content {
            background-color: #1a1a1a;
            margin: 5% auto;
            padding: 30px;
            width: 85%;
            max-width: 600px;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid #333;
            line-height: 1.6;
        }

        /* Fuerza a que el bot√≥n de detalles est√© siempre al frente y sea clickeable */
        .Detalles, [onclick*="abrirModal"], [onclick*="detalles"] {
            position: relative !important;
            z-index: 2147483647 !important; /* El m√°ximo nivel posible */
            pointer-events: auto !important;
            cursor: pointer !important;
            display: inline-block !important;
        }

        /* Evita que el contenedor padre bloquee los clics al hijo */
        .product-card.sold-out, .product-item.agotado {
            pointer-events: auto !important; 
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }

        /* Este es el nombre del producto */
        .cart-item span:first-child {
            color: #ffffff; /* Blanco para el nombre */
            flex: 1;
        }

        /* Este es el precio (el segundo span) */
        .cart-item span:nth-child(2) {
            color: #f1c40f; /* El dorado de tu marca */
            font-weight: bold;
            margin-right: 15px; /* Espacio antes de la X roja */
            min-width: 70px;
            text-align: right;
        }

        /* El nombre ocupar√° todo el espacio disponible */
        .cart-item span:first-child {
            flex-grow: 1;
            text-align: left;
            font-size: 0.95em;
        }

        /* El precio tendr√° un ancho fijo para que todos los $ se alineen igual */
        .cart-item span:nth-child(2) {
            min-width: 80px; 
            text-align: right;
            font-weight: bold;
            color: #d8e616; /* Dorado Axtelix */
        }

        .legal-link { color: #555; text-decoration: underline; cursor: pointer; font-size: 0.8em; margin: 0 10px; }

        .cupon-wrapper {
            margin: 15px 0;
            padding: 15px;
            background: #111;
            border-radius: 8px;
            border: 1px dashed #444;
            transition: all 0.3s;
        }
        .cupon-input-group {
            display: flex;
            gap: 10px;
        }
        #input-cupon {
            flex: 1;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #333;
            background: #000;
            color: white;
        }
        .btn-cupon {
            background: #d4af37;
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }


        /* Pantalla de carga AXTELIX */
#loader-axtelix {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #0a0a0a; /* Fondo minimalista oscuro */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.8s ease;
}

.letras-contenedor {
    display: flex;
    gap: 10px;
}

.letra {
    font-size: 3rem;
    font-weight: bold;
    color: #fff;
    font-family: 'Arial', sans-serif;
    animation: jugar 1.5s infinite alternate;
}

/* --- CONTENEDOR PRINCIPAL --- */
#loader-axtelix {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10000; /* Prioridad m√°xima */
    overflow: hidden;
}

/* OCULTAR BOT√ìN DE WSP EXTERNO MIENTRAS CARGA */
.joinchat, .whatsapp-button, [class*="whatsapp"] {
    display: none !important;
}

/* --- FONDO DE METEORITOS --- */
.fondo-espacial {
    position: absolute;
    width: 100%; height: 100%;
    z-index: 1;
}

.meteorito {
    position: absolute;
    top: 50%; left: 50%;
    width: 3px; height: 3px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 15px #00d4ff, 0 0 30px #00d4ff;
    opacity: 0;
    animation: lluvia-meteoritos var(--duracion) infinite linear var(--retraso);
}

@keyframes lluvia-meteoritos {
    0% { transform: rotate(var(--angulo)) translateX(0) scaleX(1); opacity: 0; }
    10% { opacity: 1; }
    100% { transform: rotate(var(--angulo)) translateX(1200px) scaleX(30); opacity: 0; }
}

/* --- CONTENIDO CENTRAL --- */
.letras-contenedor {
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 250px;
}

.logo-central {
    width: 180px;
    height: auto;
    mix-blend-mode: screen; 
    filter: brightness(1.2) contrast(1.4) drop-shadow(0 0 30px rgba(0, 212, 255, 0.8));
    -webkit-mask-image: radial-gradient(circle, black 45%, transparent 80%);
    mask-image: radial-gradient(circle, black 45%, transparent 80%);
    animation: giro-motor 4s infinite cubic-bezier(0.4, 0, 0.2, 1);
}

.letra {
    position: absolute;
    font-size: 5rem;
    font-weight: 800;
    color: #fff;
    opacity: 0;
    animation: disparo-con-flash 4s infinite;
}

@keyframes disparo-con-flash {
    0% { transform: translateX(0) scale(0.3); opacity: 0; color: #00d4ff; filter: blur(20px); }
    10% { opacity: 1; color: #fff; text-shadow: 0 0 20px #fff, 0 0 50px #00d4ff; }
    85% { opacity: 1; transform: var(--destino) scale(1); }
    100% { opacity: 0; transform: var(--destino) scale(0.8); }
}

/* --- TEXTOS Y CARGA --- */
.lema-axtelix {
    margin-top: 20px;
    color: #00d4ff;
    letter-spacing: 12px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    text-transform: uppercase;
    z-index: 10;
}

.carga-contenedor {
    margin-top: 35px;
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 10;
}

.texto-cargando {
    color: #00d4ff;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.7rem;
    letter-spacing: 4px;
    margin-bottom: 10px;
    animation: parpadeo-texto 1.5s infinite;
}

.barra-fondo {
    width: 220px;
    height: 5px;
    background: rgba(0, 212, 255, 0.1);
    border-radius: 20px;
    overflow: hidden;
}

.barra-progreso {
    width: 0%;
    height: 100%;
    background: #00d4ff;
    box-shadow: 0 0 15px #00d4ff;
    animation: progreso-sincro 4s infinite cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes progreso-sincro {
    0% { width: 0%; background: #00d4ff; }
    80% { width: 100%; background: #00d4ff; }
    85% { width: 100%; background: #fff; box-shadow: 0 0 25px #fff; }
    100% { width: 100%; opacity: 0; }
}

@keyframes giro-motor {
    0%, 100% { transform: rotate(0deg) scale(1.1); }
    50% { transform: rotate(360deg) scale(1.1); }
}

@keyframes parpadeo-texto {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* M√ìVIL */
@media (max-width: 600px) {
    .logo-central { width: 110px; }
    .letra { font-size: 2.5rem; }
    .letra-a { --destino: translateX(-140px) !important; }
    .letra-x { --destino: translateX(-100px) !important; }
    .letra-t { --destino: translateX(-60px) !important; }
    .letra-l { --destino: translateX(60px) !important; }
    .letra-i { --destino: translateX(100px) !important; }
    .letra-x2 { --destino: translateX(140px) !important; }
    .barra-fondo { width: 150px; }
}     
    </style>
</head>
<body>

    <div id="loader-axtelix">
    <div class="fondo-espacial">
        <div class="meteorito" style="--angulo: 20deg; --duracion: 1.2s; --retraso: 0s;"></div>
        <div class="meteorito" style="--angulo: 110deg; --duracion: 1.5s; --retraso: 0.3s;"></div>
        <div class="meteorito" style="--angulo: 210deg; --duracion: 1.1s; --retraso: 0.6s;"></div>
        <div class="meteorito" style="--angulo: 300deg; --duracion: 1.8s; --retraso: 0.2s;"></div>
        <div class="meteorito" style="--angulo: 55deg; --duracion: 1.4s; --retraso: 0.5s;"></div>
    </div>

    <div class="letras-contenedor">
        <span class="letra letra-a" style="--destino: translateX(-320px); animation-delay: 0.9s;">A</span>
        <span class="letra letra-x" style="--destino: translateX(-230px); animation-delay: 0.6s;">X</span>
        <span class="letra letra-t" style="--destino: translateX(-140px); animation-delay: 0.3s;">T</span>
        <img src="logo2-wp.jpg" alt="AXTELIX" class="logo-central">
        <span class="letra letra-l" style="--destino: translateX(140px); animation-delay: 0.3s;">L</span>
        <span class="letra letra-i" style="--destino: translateX(230px); animation-delay: 0.6s;">I</span>
        <span class="letra letra-x2" style="--destino: translateX(320px); animation-delay: 0.9s;">X</span>
    </div>

    <p class="lema-axtelix">Smart Life Gear</p>

    <div class="carga-contenedor">
        <span class="texto-cargando">CARGANDO SISTEMA...</span>
        <div class="barra-fondo"><div class="barra-progreso"></div></div>
    </div>
</div>



    <div class="cart-icon-fixed" id="cart-icon" onclick="openModal('cartModal')">
        üõí <span id="cart-count">0</span>
    </div>
    

    <header>
        <h1>Axtelix</h1>
        <p class="slogan-animado">
            <span>S</span><span>M</span><span>A</span><span>R</span><span>T</span>&nbsp;
            <span>L</span><span>I</span><span>F</span><span>E</span>&nbsp;
            <span>G</span><span>E</span><span>A</span><span>R</span>
        </p>
    </header>

    <div class="search-wrapper">
        <input type="text" id="productSearch" placeholder="Buscar en el cat√°logo..." onkeyup="filterProducts()" onclick="animarLupa()">
        <span class="lupa-emoji" id="lupa">üîç</span>
    </div>
    
    <h3 class="category-title">Perfumer√≠a</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-perfumes', -1)">&#10094;</button>
        <div class="container" id="container-perfumes"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-perfumes', 1)">&#10095;</button>
    </div>
    
    <h3 class="category-title">Tecnolog√≠a</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-tech', -1)">&#10094;</button>
        <div class="container" id="container-tech"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-tech', 1)">&#10095;</button>
    </div>

    <h3 class="category-title">Calzado</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-shoes', -1)">&#10094;</button>
        <div class="container" id="container-shoes"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-shoes', 1)">&#10095;</button>
    </div>

    <h3 class="category-title">SOFTWARE</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-web', -1)">&#10094;</button>
        <div class="container" id="container-web"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-web', 1)">&#10095;</button>
    </div>

    <div class="trust-section">
        <div class="trust-item">
            <h4>üöö ENV√çOS</h4>
            <p>De 5 a 7 d√≠as h√°biles a todo M√©xico.</p>
        </div>
        <div class="trust-item">
            <h4>üí≥ PAGOS</h4>
            <p>Transferencias, Dep√≥sitos y Tarjetas v√≠a WhatsApp.</p>
        </div>
        <div class="trust-item">
            <h4>‚≠ê CONFIANZA</h4>
            <p>Garant√≠a de entrega y productos de alta calidad.</p>
        </div>
        <div class="trust-item">
            <h4>üì± ATENCI√ìN</h4>
            <p>Soporte de lunes - viernes 9:00AM - 6:00PM Y sabados de 12:00PM - 7:00PM v√≠a WhatsApp.</p>
        </div>
    </div>

    <footer style="padding: 40px 20px; text-align: center;">
        <p>
            <span class="legal-link" onclick="openModal('legalModal')">T√©rminos y Condiciones</span> |
            <span class="legal-link" onclick="openModal('aboutModal')">Qui√©nes Somos</span> |
            <span class="legal-link" onclick="openModal('payModal')">Formas de Pago</span>
        </p>
        <p style="font-size: 0.7em; color:#444;">¬© 2026 AXTELIX STORE</p>
    </footer>

    <div id="cartModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('cartModal')">‚úñ</span>
        <h2>Mi Pedido</h2>
        <div id="cart-items-container"></div>
        
        <div class="cupon-wrapper">
            <p style="font-size: 0.8em; margin-bottom: 5px; color: #aaa;">¬øTienes un cup√≥n?</p>
            <div class="cupon-input-group">
                <input type="text" id="input-cupon" placeholder="C√≥digo">
                <button class="btn-cupon" onclick="aplicarCupon()">Canjear</button>
            </div>
            <p id="mensaje-cupon" style="font-size: 0.7em; margin-top: 5px;"></p>
        </div>

        <hr style="border:1px solid #333; margin:15px 0;">
        
        <div style="display:flex; justify-content:space-between; font-weight:bold; align-items: center;">
            <span>Total:</span>
            <div>
                <span id="precio-viejo" style="color: #ff4444; text-decoration: line-through; font-size: 0.9em; margin-right: 10px; display: none;"></span>
                <span id="cart-total" style="font-size: 1.2em;">$0</span>
            </div>
        </div>

        <button class="btn-whatsapp-cart" onclick="sendWhatsApp()" style="margin-top: 10px;">Confirmar por WhatsApp</button>

        <div id="pasarela-pago-axtelix" style="margin-top: 20px; border-top: 1px solid #333; padding-top: 15px;">
            <div style="background: #111; padding: 20px; border-radius: 15px; border: 1px solid #333; margin-top: 15px; font-family: sans-serif;">
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #222;">
                    <span style="color: #888; font-size: 0.9rem; font-weight: bold; text-transform: uppercase;">Pago Directo:</span>
                    <span id="total-carrito" style="color: #ffcc00; font-size: 1.8rem; font-weight: 800;">$0</span>
                </div>

                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="pagoDirecto('mercado')" style="background: #009ee3; color: white; border: none; padding: 14px; border-radius: 10px; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center;">
                        <img src="https://img.icons8.com/color/48/000000/mercado-pago.png" width="20" style="margin-right: 10px;"> Mercado Pago
                    </button>
                    <button onclick="pagoDirecto('paypal')" style="background: #ffc439; color: #003087; border: none; padding: 14px; border-radius: 10px; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center;">
                        <img src="https://img.icons8.com/color/48/000000/paypal.png" width="20" style="margin-right: 10px;"> PayPal
                    </button>
                    <button onclick="pagoDirecto('transferencia')" style="background: #222; color: #eee; border: 1px solid #444; padding: 14px; border-radius: 10px; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center;">
                        <img src="https://img.icons8.com/color/48/000000/bank.png" width="20" style="margin-right: 10px;"> Transferencia
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="legalModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer; font-weight:bold; color: #d4af37;" onclick="closeModal('legalModal')">‚úñ</span>
        <h2 style="color: #d4af37; margin-bottom: 15px;">T√©rminos y Condiciones</h2>
        <div style="text-align: left; font-size: 14px; line-height: 1.6; color: #eee; max-height: 60vh; overflow-y: auto;">
            <p><b>1. Naturaleza del Servicio:</b> Axtelix opera bajo un modelo de <b>Dropshipping</b>. Al comprar, reconoces que somos intermediarios entre proveedores internacionales y t√∫.</p>
            <p><b>2. Env√≠os:</b> Tiempo estimado de 5 a 7 d√≠as h√°biles. Puede extenderse en casos excepcionales ajenos a nuestra log√≠stica.</p>
            <p><b>3. Precios:</b> Todos nuestros precios est√°n expresados en <b>MXN</b>. Las ofertas y promociones son por tiempo limitado.</p>
            <p><b>4. Devoluciones:</b> Solo se aplican por defectos de f√°brica reportados en las primeras <b>48 horas</b> tras recibir el producto.</p>
            <p><b>5. Facturaci√≥n:</b> Para requerir facturas fiscales, es necesario contactar v√≠a WhatsApp antes de realizar el pago.</p>
        </div>
    </div>
</div>

<div id="aboutModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer; font-weight:bold; color: #d4af37;" onclick="closeModal('aboutModal')">‚úñ</span>
        <h2 style="color: #d4af37; margin-bottom: 15px;">Qui√©nes Somos</h2>
        <p style="text-align: justify; color: #eee; line-height: 1.6;">
            Bienvenido a <b>Axtelix</b>, m√°s que una tienda, somos sus aliados en la b√∫squeda de la distinci√≥n. 
            Nuestra misi√≥n es simplificar el acceso a lo extraordinario, seleccionando cuidadosamente cada pieza de nuestra colecci√≥n de perfumer√≠a fina, tecnolog√≠a de vanguardia y calzado de edici√≥n especial. 
            Nos mueve la pasi√≥n por los detalles y el compromiso de acompa√±arle en cada paso de su elecci√≥n.
        </p>
    </div>
</div>

<div id="payModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer; font-weight:bold; color: #d4af37;" onclick="closeModal('payModal')">‚úñ</span>
        <h2 style="color: #d4af37; margin-bottom: 15px;">Formas de Pago</h2>
        <div style="text-align: left; color: #eee; line-height: 2;">
            <p>‚Ä¢ <b style="color: #d4af37;">PayPal</b> (Cr√©dito/D√©bito)</p>
            <p>‚Ä¢ <b style="color: #d4af37;">Transferencia Bancaria</b> (SPEI)</p>
            <p>‚Ä¢ <b style="color: #d4af37;">Dep√≥sito en OXXO</b></p>
            <p>‚Ä¢ <b style="color: #d4af37;">Mercado Pago / Clip</b></p>
        </div>
    </div>
</div>

<div id="detailsModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('detailsModal')">‚úñ</span>
        <h2 id="detailName"></h2>
        <p id="detailInfo"></p>
    </div>
</div>

    <script>
        let cart = [];
        let descuentoAplicado = 0;

        const PERFUMERIA = [
            { cat: 'perfumes', nombre: 'JPG Elixir', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'jpgelixir-wp.jpeg', desc: '125ml. El aroma del momento.' },
            { cat: 'perfumes', nombre: 'Sauvage Dior Elixir', precio: 1099, oferta: false, agotado: false, img: 'sauvageDior-wp.jpeg', desc: '100ml. El cl√°sico infaltable.' },
            { cat: 'perfumes', nombre: 'Bleu De Chanel', precio: 1299, precioOriginal: 1500, oferta: false, agotado: false, img: 'bleuofchanel-wp.jpeg', desc: '100ml. Elegancia pura.' },
            { cat: 'perfumes', nombre: 'Versace', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'versace1-wp.png', desc: 'Inspirado en la mitolog√≠a griega.' },
            { cat: 'perfumes', nombre: 'Stronger With You Absolutely', precio: 1249, precioOriginal: 1500, oferta: false, agotado: false, img: 'stronger1-wp.png', desc: 'El poder del amor absoluto.' },
            { cat: 'perfumes', nombre: 'JPG Scandal Le Parfum', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'scandal-wp.png', desc: 'Para el hombre que destaca.' },
            { cat: 'perfumes', nombre: '9PM Rebel', precio: 949, precioOriginal: 1500, oferta: false, agotado: false, img: '9pmrebel-wp.png', desc: 'La opci√≥n perfecta para la noche.' },
            { cat: 'perfumes', nombre: 'JPG Le Male Le Parfum', precio: 1299, precioOriginal: 1500, oferta: false, agotado: false, img: 'lemale-wp.jpeg', desc: 'Versi√≥n intensa del cl√°sico.' },
            { cat: 'perfumes', nombre: 'Valentino Born In Roma Rockstud', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'valentino1-wp.jpeg', desc: 'Fragancia oscura y arom√°tica.' },
            { cat: 'perfumes', nombre: 'Bad Boy Le Parfum', precio: 1150, oferta: false, agotado: false, img: 'badboy-wp.jpeg', desc: '100ml. Electrizante.' },
            { cat: 'perfumes', nombre: 'Dylan Blue', precio: 899, precioOriginal: 1650, oferta: false, agotado: false, img: 'dylanblue-wp.jpg', desc: 'El equilibrio perfecto entre frescura marina y seducci√≥n intensa.' },
            { cat: 'perfumes', nombre: 'Bad Boy Cobalt Elixir', precio: 1150, precioOriginal: 1650, oferta: false, agotado: false, img: 'cobalt-wp.jpg', desc: 'Electrizante y fresco. La esencia del hombre moderno y audaz.' },
            { cat: 'perfumes', nombre: 'Club de Nuit Intense Man', precio: 850, precioOriginal: 1650, oferta: false, agotado: false, img: 'clubnuit-wp.jpg', desc: 'Lujoso y potente. Un aroma que proyecta √©xito en cada paso.' },
            { cat: 'perfumes', nombre: 'JPG Paradise Garden', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'paradise-wp.jpg', desc: 'Ex√≥tico y tropical. Un viaje sensorial al para√≠so prohibido.' },
            { cat: 'perfumes', nombre: 'Azzaro The Most Wanted', precio: 1050, precioOriginal: 1650, oferta: false, agotado: false, img: 'azzaro-wp.jpg', desc: 'El arma de seducci√≥n definitiva. Dulce, especiado e irresistible.' },
            { cat: 'perfumes', nombre: 'JPG Le Male Elixir Absolu', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'absolu-wp.jpg', desc: 'Intenso como el oro. Una mezcla ardiente de vainilla y lavanda.' },
            { cat: 'perfumes', nombre: 'Versace Eros Flame', precio: 849, precioOriginal: 1650, oferta: false, agotado: false, img: 'VersaceErosFlame-wp.jpg', desc: 'Pasi√≥n en estado puro. Notas c√≠tricas y amaderadas que queman.' },
            { cat: 'perfumes', nombre: '212 VIP Black', precio: 849, precioOriginal: 1650, oferta: false, agotado: false, img: '212black-wp.jpg', desc: 'El alma de la fiesta. Un aroma explosivo, dulce y magn√©tico.' },
            { cat: 'perfumes', nombre: 'Bond No. 9 Madison Avenue - Eau de Parfum', precio: 1890, precioOriginal: 1650, oferta: false, agotado: false, img: 'madisonavenue-wp.jpg', desc: 'La esencia del shopping de lujo en Nueva York. Madison Avenue es una fragancia fresca, floral y afrutada dise√±ada para la mujer moderna y con estilo. Destacan sus notas de manzana, bergamota y zarzamora, que se mezclan con un coraz√≥n de rosa y jazm√≠n sobre una base de pachul√≠. Un aroma vibrante, sofisticado y lleno de energ√≠a.' },
            { cat: 'perfumes', nombre: 'Bond No. 9 Lafayette Street - Eau de Parfum', precio: 1950, precioOriginal: 1650, oferta: false, agotado: false, img: 'lafayette-wp.jpg', desc: 'El aroma de la confianza absoluta. Lafayette Street es una fragancia vers√°til y ultra moderna que combina notas c√≠tricas, florales y amaderadas. Destaca por su salida fresca de bergamota y cilantro, que evoluciona hacia un fondo dulce y suave de vainilla, √°mbar y haba tonka. Es el perfume perfecto tanto para el d√≠a como para la noche, ideal para quien busca destacar con elegancia.' },
            { cat: 'perfumes', nombre: 'Louis Vuitton Myriad - Extrait de Parfum', precio: 1990, precioOriginal: 2450, oferta: true, agotado: false, img: 'myriad-wp.jpg', desc: 'Una joya de la alta perfumer√≠a. Myriad es una fragancia profunda y opulenta que rinde homenaje al preciado Oud. Se mezcla con notas de rosa de Grasse, azafr√°n y cacao, creando un aroma c√°lido, especiado y sumamente sofisticado. Su frasco, dise√±ado con un tap√≥n escult√≥rico √∫nico, refleja la exclusividad de su interior. Una experiencia sensorial para los gustos m√°s exigentes.' },
            { cat: 'perfumes', nombre: 'Carolina Herrera Good Girl - Eau de Parfum', precio: 1590, precioOriginal: 1650, oferta: false, agotado: false, img: 'carolinaH-wp.jpg', desc: 'Una fragancia ic√≥nica que destaca por su elegancia y sofisticaci√≥n. Good Girl combina notas florales de jazm√≠n y nardo con un toque c√°lido de cacao y haba tonka. Su dise√±o en forma de tac√≥n azul medianoche es un s√≠mbolo de estilo a nivel mundial. Ideal para uso nocturno o eventos especiales. Presentaci√≥n de 80ml.' },
            { cat: 'perfumes', nombre: 'Carolina Herrera Good Girl L√©gere - Eau de Parfum', precio: 1550, precioOriginal: 1650, oferta: false, agotado: false, img: 'carolinaHxir-wp.jpg', desc: 'Una versi√≥n m√°s luminosa y fresca del ic√≥nico tac√≥n. Good Girl L√©gere destaca por su equilibrio perfecto entre el dulce del dulce de leche y la frescura del jazm√≠n y el ylang-ylang. Es una fragancia sofisticada, ideal para el uso diario o eventos de d√≠a, que mantiene la elegancia caracter√≠stica de la l√≠nea. Presentaci√≥n de 80ml con frasco en degradado azul.' },
            { cat: 'perfumes', nombre: 'Bond No. 9 Greenwich Village - Eau de Parfum', precio: 1850, precioOriginal: 1650, oferta: false, agotado: false, img: 'greenwich-wp.jpg', desc: 'La esencia de la sofisticaci√≥n neoyorquina. Greenwich Village es una fragancia cautivadora que equilibra la frescura del lichi y la mandarina con la dulzura del pralin√© y el toque moderno del ambroxan. Un aroma ligero, elegante y con una fijaci√≥n excepcional, ideal para quien busca una firma olfativa √∫nica y refrescante. Presentaci√≥n premium de 100ml.' },
            { cat: 'perfumes', nombre: 'JPG Le Beau - Eau de Toilette', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'lebeau-wp.jpg', desc: 'La frescura del para√≠so en un frasco. Le Beau de Jean Paul Gaultier es una fragancia magn√©tica y ultra fresca que gira en torno a tres notas clave: la frescura del bergamota, la calidez de la madera de coco y la dulzura del haba tonka. Un aroma tropical, sexy y moderno, ideal para el uso diario o climas c√°lidos. Presentaci√≥n de 125ml en su ic√≥nico frasco de torso masculino.' },
            { cat: 'perfumes', nombre: 'Odyssey Mandarin', precio: 899, precioOriginal: 1650, oferta: false, agotado: false, img: 'Odyssey-wp.jpg', desc: 'Un perfume muy equilibrado que combina notas modernas con un fondo cl√°sico. No es escandaloso, es m√°s bien un aroma que acompa√±a bien en el trabajo o en reuniones tranquilas. Una opci√≥n segura si no sabes cu√°l elegir.' },
            { cat: 'perfumes', nombre: 'Invictus Elixir', precio: 1200, precioOriginal: 1650, oferta: false, agotado: false, img: 'invictusE-wp.jpg', desc: 'Si te gusta el aroma cl√°sico de Invictus pero buscas que se sienta un poco m√°s profundo y serio, esta versi√≥n es la ideal. Tiene un toque de vainilla salada que lo hace muy agradable y f√°cil de llevar a diario.' },
            { cat: 'perfumes', nombre: 'Hawas Fire', precio: 1100, precioOriginal: 1650, oferta: false, agotado: false, img: 'hawasfire-wp.jpg', desc: 'Una opci√≥n muy vers√°til que mezcla notas c√≠tricas con un toque c√°lido. Es de esos perfumes que te pones cuando quieres sentirte limpio y con energ√≠a. Se adapta bien a cualquier clima y no cansa el olfato.' },
            { cat: 'perfumes', nombre: 'Hawas Elixir', precio: 1150, precioOriginal: 1650, oferta: false, agotado: false, img: 'hawasE-wp.jpg', desc: 'Esta es una versi√≥n un poco m√°s concentrada. Mantiene la frescura que a todos les gusta pero se siente un poco m√°s maduro y tranquilo. Lo mejor que tiene es que se queda contigo muchas horas sin necesidad de retocarlo.' },
            { cat: 'perfumes', nombre: '9PM', precio: 850, precioOriginal: 1650, oferta: false, agotado: false, img: '9pm-wp.jpg', desc: 'Un perfume muy c√≥modo de usar, con notas de vainilla y manzana que se sienten suaves pero duran todo el d√≠a. Es ideal si buscas algo que huela bien sin ser demasiado fuerte. Muy recomendado para salir por la tarde o noche.' },
            { cat: 'perfumes', nombre: 'Parfums de Marly Layton', precio: 1650, precioOriginal: 1650, oferta: false, agotado: false, img: 'marlyazul-wp.jpg', desc: 'Un aroma que huele a limpio, como reci√©n salido de ba√±ar. Es muy fresco, con notas de lavanda y c√≠tricos que dan una sensaci√≥n de orden y confianza. Es el tipo de perfume que a todo el mundo le cae bien.' },
            { cat: 'perfumes', nombre: 'Hawas Ice', precio: 899, precioOriginal: 1650, oferta: false, agotado: false, img: 'hawasHice-wp.jpg', desc: 'Frescura glacial. La versi√≥n m√°s potente y fr√≠a del legendario Hawas.' },
            { cat: 'perfumes', nombre: 'Maison Francis Kurkdjian - Baccarat Rouge 540', precio: 1450, precioOriginal: 1650, oferta: false, agotado: false, img: 'maison-wp.jpg', desc: 'Un aroma verdaderamente especial que se siente como una segunda piel. Destaca por su equilibrio perfecto entre el dulzor del jazm√≠n y la calidez del √°mbar. Es una fragancia luminosa y sofisticada, ideal si buscas algo que deje una impresi√≥n memorable pero suave.' },
            { cat: 'perfumes', nombre: 'Afnan 9AM Dive', precio: 890, precioOriginal: 1650, oferta: false, agotado: false, img: '9amDivine-wp.jpg', desc: 'La opci√≥n ideal para quienes disfrutan de los aromas frescos y energ√©ticos. Se siente como una brisa marina combinada con toques de menta y c√≠tricos. Es muy vers√°til: perfecto tanto para el gimnasio como para una salida casual el fin de semana.' },
            { cat: 'perfumes', nombre: 'Afnan 9AM', precio: 850, precioOriginal: 1650, oferta: false, agotado: false, img: '9am-wp.jpg', desc: 'Pensado para acompa√±arte en tus actividades diarias desde temprano. Tiene un car√°cter limpio y revitalizante gracias a sus notas de mandarina y cardamomo. Es ese perfume que te hace sentir impecable y listo para cualquier reuni√≥n.' },
            { cat: 'perfumes', nombre: 'Armani Acqua di Gi√≤ - Classic', precio: 1150, precioOriginal: 1650, oferta: false, agotado: false, img: 'gio1-wp.jpg', desc: 'Un cl√°sico que nunca falla porque transmite naturalidad y frescura. Inspirado en el mar y el sol, mezcla notas acu√°ticas con c√≠tricos ligeros. Es la elecci√≥n segura si buscas un aroma que a todo el mundo le agrada.' },
            { cat: 'perfumes', nombre: 'Armani Acqua di Gi√≤ Profondo', precio: 1250, precioOriginal: 1650, oferta: false, agotado: false, img: 'gio2-wp.jpg', desc: 'Una interpretaci√≥n m√°s moderna y profunda del cl√°sico de Armani. Tiene un toque m√°s intenso con notas oce√°nicas y romero, lo que le da un car√°cter m√°s decidido. Es refrescante pero con una duraci√≥n notable.' },
            { cat: 'perfumes', nombre: 'Kalan - Parfums de Marly', precio: 1600, precioOriginal: 1650, oferta: false, agotado: false, img: 'marlyrojo-wp.jpg', desc: 'Una fragancia con mucha personalidad para quienes buscan algo diferente. Combina la frescura de la naranja con un fondo especiado de pimienta negra. Es un aroma c√°lido y robusto que se adapta muy bien a climas frescos o eventos nocturnos.' },
            { cat: 'perfumes', nombre: 'Lacoste L.12.12 Jaune', precio: 1299, precioOriginal: 1099, oferta: false, agotado: false, img: 'lacA-wp.jpg', desc: 'La definici√≥n de optimismo en una botella. Es una fragancia sumamente alegre y radiante, donde destaca la nota de toronja y manzana verde. Se siente muy fresca y ligera, perfecta para d√≠as soleados o despu√©s de hacer ejercicio. Es ese aroma sencillo pero efectivo que te hace sentir bien al instante.' },
            { cat: 'perfumes', nombre: 'Silver Mountain Water - Creed', precio: 1499, precioOriginal: 1499, oferta: false, agotado: false, img: 'silvercreed-wp.jpg', desc: 'Una fragancia inspirada en la pureza y frescura de las monta√±as. Se siente como un aire fr√≠o y cristalino, gracias a su mezcla de t√© verde, grosellas negras y bergamota. Es un aroma muy limpio, relajante y elegante, ideal para quienes disfrutan de perfumes que transmiten serenidad y clase.' },
        ];

        const TECNOLOGIA = [
            { cat: 'tech', nombre: 'Iphone 17 Pro', precio: 14999, precioOriginal: 23499, oferta: true, agotado: false, img: 'iphone17-wp.jpeg', desc: '256GB Titanium.' },
            { cat: 'tech', nombre: 'Airpods Pro 2G', precio: 899, precioOriginal: 1200, oferta: false, agotado: false, img: 'airpods-wp.jpeg', desc: 'Cancelaci√≥n de ruido.' },
            { cat: 'tech', nombre: 'Cargador Inal√°mbrico MagSafe Pro', precio: 449, oferta: false, agotado: false, img: 'cargador-wp.png', desc: 'Optimiza la carga de tu iPhone.' }
        ];

        const CALZADO = [
            { cat: 'shoes', nombre: 'Nike Dunk Low', precio: 1390, precioOriginal: 2549, oferta: true, agotado: false, img: 'nike-wp.jpeg', desc: 'Calidad Garantizada. Tallas 23-29 MX.' },
            { cat: 'shoes', nombre: 'Nike Air Max 270 Black/White', precio: 1350, oferta: false, agotado: false, img: 'nikeairforce-wp.jpg', desc: 'Estilo y comodidad en cada paso. Los Nike Air Max 270 cuentan con la unidad Air m√°s alta hasta la fecha. Ofreciendo una amortiguaci√≥n ultra suave que se siente como caminar en el aire. Con un dise√±o inspirado en los iconos de Air Max. su parte superior de malla transpirable mantiene tus pies frescos. Ideales para el uso diario con un look deportivo y moderno.' },
            { cat: 'shoes', nombre: 'Nike Air Force Premium Just Do It', precio: 1450, oferta: false, agotado: false, img: 'nikebn-wp.jpg', desc: 'Un icono que celebra la motivaci√≥n. Esta edici√≥n especial de los Air Force 1 presenta el legendario lema Just Do It con un dise√±o de logotipos repetidos sobre el Swoosh. Fabricados con materiales sint√©ticos de alta calidad y la cl√°sica c√°psula de aire en la suela para una comodidad duradera. El equilibrio perfecto entre un estilo cl√°sico y un mensaje audaz.' }
        ];

        const SOFTWARE = [
            { cat: 'web', nombre: 'Paginas Web', precio: 14500, precioOriginal: 0, oferta: false, agotado: true, img: 'paginaweb-wp.jpg', desc: "üöÄ ECOSISTEMA AUTOMATIZADO: No es solo una web, es un sistema que VENDE POR TI 24/7. Incluye Bot de WhatsApp inteligente, gesti√≥n directa desde Google Sheets y generador de tickets profesional. ¬°Lleva tu negocio al siguiente nivel hoy mismo!"},
            { cat: 'web', nombre: 'AXTELIX ERP | Standard Edition', precio: 1200, precioOriginal: 0, oferta: false, agotado: false, img: 'soft1-wp.png', desc: "¬øCansado de no saber cu√°nto ganas realmente al final del d√≠a? Deja de usar libretas o Excels complicados. Con AXTELIX ERP, profesionaliza tu negocio de Dropshipping o tienda f√≠sica con una interfaz de √∫ltima generaci√≥n. ¬øQu√© incluye esta versi√≥n? üõí Punto de Venta (POS): Escanea c√≥digos, suma productos y cierra ventas en segundos. üì¶ Gesti√≥n de Inventario: Controla entradas, salidas y existencias reales (¬°No m√°s ventas sin stock!). üìä Dashboard de Ganancias: Visualiza tu total acumulado con un solo clic. üîí Seguridad por Equipo: Licencia vinculada a tu hardware para proteger tu informaci√≥n. ‚ö° Interfaz Dark Mode: Dise√±o fluido, r√°pido y moderno (CustomTkinter). Ideal para emprendedores que buscan rapidez y orden sin pagar mensualidades costosas."}
        ];

        const INVENTARIO = [...PERFUMERIA, ...TECNOLOGIA, ...CALZADO, ...SOFTWARE];

        function renderizarProductos() {
            const contenedores = {
                perfumes: document.getElementById('container-perfumes'),
                tech: document.getElementById('container-tech'),
                shoes: document.getElementById('container-shoes'),
                web: document.getElementById('container-web')
            };

            Object.values(contenedores).forEach(c => { if(c) c.innerHTML = ''; });

            INVENTARIO.forEach(p => {
    const esAgotado = p.agotado ? 'sold-out' : '';
    const badgeAgotado = p.agotado ? `<div class="badge-agotado">SOLD OUT</div>` : '';
    const badgeOferta = p.oferta && !p.agotado ? `<div class="badge-oferta">OFERTA üî•</div>` : '';
    
    
    // Si est√° agotado, el bot√≥n dir√° "SIN STOCK"
    const textoBoton = p.agotado ? "SIN STOCK" : "A√ëADIR AL CARRITO";
    const precioTachado = p.oferta ? `<span style="text-decoration: line-through; color: #888; font-size: 0.8rem; display: block;">$${p.precioOriginal}</span>` : '';

    const html = `
        <div class="product-card ${esAgotado}">
            ${badgeOferta}
            ${badgeAgotado}
            <h3>${p.nombre}</h3>
            <span class="price">${precioTachado} $${p.precio}</span>
            <img src="${p.img}" onclick="showProductDetails('${p.nombre}', '${p.desc}')">
            <button class="btn-details" onclick="showProductDetails('${p.nombre}', '${p.desc}')">Detalles</button>
            <button class="btn-add-cart" onclick="addToCart('${p.nombre}', ${p.precio}, this)" ${p.agotado ? 'disabled' : ''}>
                ${textoBoton}
            </button>
        </div>
    `;
    if (contenedores[p.cat]) contenedores[p.cat].innerHTML += html;
    setTimeout(activarSensores, 500);
});
        }

        // --- ANIMACI√ìN DE LA LUPA ---
        function animarLupa() {
            const lupa = document.getElementById('lupa');
            const searchInput = document.getElementById('productSearch');
            
            // Efecto lupa feliz gira
            lupa.classList.add('lupa-feliz');
            setTimeout(() => {
                lupa.classList.remove('lupa-feliz');
                // Expandir texto (letter-spacing)
                searchInput.style.letterSpacing = "2px";
            }, 700);
        }

        function scrollSlider(id, direction) {
    const container = document.getElementById(id);
    const scrollAmount = 320 * direction;
    
    // Si la pantalla es peque√±a (celular), que sea instant√°neo
    if (window.innerWidth <= 768) {
        container.scrollBy({
            left: scrollAmount,
            behavior: 'auto' // 'auto' es instant√°neo, sin esperas ni trabas
        });
        return; // Salimos de la funci√≥n para que no intente hacer lo lento
    }

    // --- Si es PC, sigue con tu animaci√≥n suave de siempre ---
    const start = container.scrollLeft;
    const duration = 1300; // Aqu√≠ puedes dejarlo en 1300 o lo que prefieras para PC
    let startTime = null;

    function animation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1);
        const ease = progress < 0.5 ? 2 * progress * progress : 1 - Math.pow(-2 * progress + 2, 2) / 2;
        container.scrollLeft = start + (scrollAmount * ease);
        if (timeElapsed < duration) requestAnimationFrame(animation);
    }
    requestAnimationFrame(animation);
}

        function addToCart(nameOrBtn, price, btnElement) {
    let nombre, precio, btn;

    // --- 1. DETECCI√ìN DE FORMATO (Compatibilidad Total) ---
    if (typeof nameOrBtn === 'string') {
        // Formato viejo: addToCart('Dunk', 790, this)
        nombre = nameOrBtn;
        precio = price;
        btn = btnElement;
    } else {
        // Formato nuevo: addToCart(this)
        btn = nameOrBtn;
        const card = btn.closest('.product-card');
        nombre = card.querySelector('h3').innerText;
        precio = card.querySelector('.price').innerText;
    }

    const card = btn.closest('.product-card');
    const tallaSel = card.querySelector('.size-btn.active');
    
    // --- 2. VALIDACI√ìN DE TALLA ---
    if (card.querySelector('.size-options') && !tallaSel) {
        alert("Por favor, selecciona una talla");
        return;
    }

    // --- 3. GUARDAR EN EL CARRITO (Doble nombre para evitar errores) ---
    const producto = {
        nombre: nombre,      // Para el Ticket
        name: nombre,        // Para que el carrito viejo lo reconozca
        precio: String(precio),
        price: precio,       // Para que el carrito viejo lo reconozca
        talla: tallaSel ? tallaSel.innerText : null,
        cantidad: 1
    };
    cart.push(producto);

    // --- 4. ANIMACIONES (Tu c√≥digo original mejorado) ---
    const cartIcon = document.getElementById('cart-icon');
    if (cartIcon) {
        cartIcon.classList.remove('cart-pop');
        void cartIcon.offsetWidth; // Reinicia animaci√≥n
        cartIcon.classList.add('cart-pop');
    }
    
    // Feedback en el bot√≥n
    const originalText = btn.innerText;
    const originalBG = btn.style.backgroundColor;

    btn.innerText = "¬°A√ëADIDO!";
    btn.style.backgroundColor = "#d4af37";
    btn.style.color = "#000000"; // Asegura que el texto se vea
    
    setTimeout(() => {
        btn.innerText = "A√ëADIR AL CARRITO";
        btn.style.backgroundColor = "#ffffff";
        btn.style.color = "#000000";
    }, 800);

    // --- 5. ACTUALIZAR INTERFAZ ---
    // Llamamos a ambas por si acaso, as√≠ no falla nada arriba
    if (typeof actualizarCarrito === 'function') actualizarCarrito();
    if (typeof updateCartUI === 'function') updateCartUI();
}

        function updateCartUI() {
    document.getElementById('cart-count').innerText = cart.length;
    const container = document.getElementById('cart-items-container');
    const totalEl = document.getElementById('cart-total');
    container.innerHTML = '';
    let subtotal = 0;

    // 1. Agrupamos los productos por nombre para sumar cantidades
    const cartGrouped = {};
    cart.forEach((item, index) => {
        subtotal += item.price;
        if (cartGrouped[item.name]) {
            cartGrouped[item.name].quantity += 1;
            // Guardamos el primer √≠ndice que encontremos para que el bot√≥n eliminar funcione
            cartGrouped[item.name].originalIndices.push(index);
        } else {
            cartGrouped[item.name] = { 
                ...item, 
                quantity: 1, 
                originalIndices: [index] 
            };
        }
    });

    // 2. Renderizamos los productos ya agrupados
    Object.values(cartGrouped).forEach(item => {
        const lastIndex = item.originalIndices[item.originalIndices.length - 1];
        container.innerHTML += `
        <div class="cart-item">
        <span>${item.quantity}x ${item.name}</span>
        <span>$${item.price * item.quantity}</span>
        <button onclick="removeFromCart(${lastIndex})" 
                style="background:none; border:none; color:#ff4d4d; cursor:pointer; font-size:16px; margin-left:10px;">
            ‚úñ
        </button>
    </div>`;
    });

    // 3. L√≥gica del total con descuento (se queda igual a como la ten√≠as)
    let finalTotal = subtotal - descuentoAplicado;
    if(finalTotal < 0) finalTotal = 0;
    
    totalEl.innerHTML = descuentoAplicado > 0 
        ? `<small style="color:red; text-decoration:line-through;">$${subtotal}</small> $${finalTotal}`
        : `$${subtotal}`;
}

        async function aplicarCupon() {
            const input = document.getElementById('input-cupon').value.trim().toUpperCase();
            const mensaje = document.getElementById('mensaje-cupon');
            if (!input) return;
            mensaje.style.color = "white";
            mensaje.innerText = "Validando...";

            try {
                const respuesta = await fetch('https://axtelix-backend.onrender.com/validar-cupon', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ codigo: input })
                });
                const data = await respuesta.json();
                if (data.valido) {
                    descuentoAplicado = data.descuento;
                    mensaje.style.color = "#25d366";
                    mensaje.innerText = `¬°Cup√≥n Aplicado! -$${descuentoAplicado} MXN`;
                    updateCartUI();
                } else {
                    mensaje.style.color = "red";
                    mensaje.innerText = data.mensaje;
                }
            } catch (error) {
                mensaje.style.color = "orange";
                mensaje.innerText = "Error de conexi√≥n.";
            }
        }

        function removeFromCart(index) { 
            cart.splice(index, 1); 
            updateCartUI(); 
        }

        function sendWhatsApp() {
    if(cart.length === 0) return alert("El carrito est√° vac√≠o");

    let subtotal = 0;
    const cartGrouped = {};

    // 1. Agrupamos y sumamos el subtotal
    cart.forEach(item => {
        subtotal += item.price;
        cartGrouped[item.name] = (cartGrouped[item.name] || 0) + 1;
    });

    let msg = "¬°Hola Axtelix! Deseo comprar:%0A";

    // 2. Creamos la lista con el formato "2x Producto"
    for (const [name, quantity] of Object.entries(cartGrouped)) {
        msg += `- ${quantity}x ${name}%0A`;
    }

    // 3. C√°lculo de totales (manteniendo tu l√≥gica de cupones)
    let totalFinal = subtotal - descuentoAplicado;
    if(totalFinal < 0) totalFinal = 0;

    if(descuentoAplicado > 0) msg += `%0ADESCUENTO: -$${descuentoAplicado}%0A`;
    
    msg += `%0ATotal Final: $${totalFinal}%0A%0A¬øMe podr√≠an proporcionar los m√©todos de pago?`;

    // 4. Abrir WhatsApp
    window.open(`https://wa.me/527206181781?text=${msg}`);
}

        function filterProducts() {
            const input = document.getElementById('productSearch').value.toLowerCase();
            const cards = document.getElementsByClassName('product-card');
            for (let card of cards) {
                const title = card.getElementsByTagName('h3')[0].innerText.toLowerCase();
                card.classList.toggle('hidden', !title.includes(input));
            }
        }

        function showProductDetails(name, info) {
            document.getElementById('detailName').innerText = name;
            document.getElementById('detailInfo').innerText = info;
            openModal('detailsModal');
        }

        function openModal(id) { document.getElementById(id).style.display = "block"; }
        function closeModal(id) { document.getElementById(id).style.display = "none"; }
        window.onclick = function(e) { if(e.target.className === 'modal') e.target.style.display = "none"; }
        window.onload = renderizarProductos;


        // Configuramos el "Sensor"
const observerOptions = {
    root: null, // usa la pantalla como referencia
    threshold: 0.7 // el producto debe estar al 70% visible para activarse
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            // Cuando el producto entra al centro, brilla
            entry.target.classList.add('active');
        } else {
            // Cuando se sale del centro, se apaga
            entry.target.classList.remove('active');
        }
    });
}, observerOptions);

// Funci√≥n para decirle al sensor qu√© observar
function activarSensores() {
    const productos = document.querySelectorAll('.product-card');
    productos.forEach(p => observer.observe(p));
}

// Lo ejecutamos despu√©s de que se carguen los productos
// Como t√∫ usas renderizarProductos(), hay que llamarla ah√≠
setTimeout(activarSensores, 1000);



function crearEstrellaAmbiente() {
    const estrella = document.createElement('span');
    
    // 1. Crea tu lista de emojis favoritos aqu√≠
    const emojis = ['‚≠ê', '‚ö°']; 
    
    // 2. Esta l√≠nea elige uno al azar de la lista
    const emojiRandom = emojis[Math.floor(Math.random() * emojis.length)];
    
    estrella.textContent = emojiRandom;
    estrella.className = 'estrella-ambiente';

    // ... (el resto de tu c√≥digo de tama√±o y posici√≥n se queda igual)
    // 1. Tama√±o aleatorio
    const size = Math.floor(Math.random() * 2) + 1; // 1.5rem, 2.5rem
    estrella.style.fontSize = `${size}rem`;

    // 2. Posici√≥n aleatoria en toda la p√°gina
    const posX = Math.floor(Math.random() * window.innerWidth);
    const posY = Math.floor(Math.random() * document.body.scrollHeight);
    
    estrella.style.left = `${posX}px`;
    estrella.style.top = `${posY}px`;

    // 3. Direcci√≥n de flotaci√≥n aleatoria para que se muevan a distintos lados
    const floatX = (Math.random() - 0.5) * 200; // Se mueve de -100px a +100px en X
    const floatY = (Math.random() - 0.5) * 200; // Se mueve de -100px a +100px en Y
    estrella.style.setProperty('--float-x', `${floatX}px`);
    estrella.style.setProperty('--float-y', `${floatY}px`);

    // 4. Aplicar la animaci√≥n de flotar y desvanecer
    estrella.style.animation = `estrellaFlotante ${Math.random() * 8 + 5}s forwards`; // Duraci√≥n entre 5 y 13 segundos

    document.body.appendChild(estrella);

    // 5. Limpiar el HTML despu√©s de que la estrella se desvanezca
    setTimeout(() => {
        estrella.remove();
    }, 13000); // Un poco m√°s del m√°ximo de la animaci√≥n
}

// Lanza una estrella nueva cada 1.5 segundos (puedes ajustar el tiempo)
setInterval(crearEstrellaAmbiente, 1500);

function lluviaDeEstrellas() {
    // Definimos cu√°ntas estrellas queremos que salgan al mismo tiempo
    // En este caso, saldr√°n entre 2 y 5 estrellas cada vez
    const cantidad = Math.floor(Math.random() * 4) + 2; 

    for (let i = 0; i < cantidad; i++) {
        // Usamos un peque√±o delay para que no aparezcan todas exactamente al mismo milisegundo
        setTimeout(crearEstrellaAmbiente, Math.random() * 500);
    }
}

// Ahora llamamos a la "lluvia" cada 2 segundos
setInterval(lluviaDeEstrellas, 2000);



document.addEventListener('keydown', function (e) {
    // Bloquea Ctrl + Plus, Ctrl + Minus y Ctrl + Zero
    if (e.ctrlKey && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '0')) {
        e.preventDefault();
    }
});

document.addEventListener('wheel', function (e) {
    // Bloquea el Ctrl + Rueda del rat√≥n
    if (e.ctrlKey) {
        e.preventDefault();
    }
}, { passive: false });

const productos = ["Sauvage Dior", "Nike Dunk Low", "Bleu de Chanel", "Versace Eros"];
const ciudades = ["CDMX", "Monterrey", "Guadalajara", "Canc√∫n", "Quer√©taro"];

function mostrarNotificacion() {
    const proof = document.getElementById('social-proof') || document.createElement('div');
    proof.id = 'social-proof';
    document.body.appendChild(proof);

    const p = productos[Math.floor(Math.random()*productos.length)];
    const c = ciudades[Math.floor(Math.random()*ciudades.length)];
    
    proof.innerHTML = `üõçÔ∏è <b>Alguien en ${c}</b><br>compr√≥ un ${p} hace un momento.`;
    proof.style.left = '20px';

    setTimeout(() => { proof.style.left = '-300px'; }, 5000); // Se esconde tras 5s
}
setInterval(mostrarNotificacion, 60000); // Sale cada 60 segundos


// --- 1. SINCRONIZADOR DE PRECIOS ---
// --- 1. SISTEMA DE PRECIOS Y FOLIOS (CON OBSERVADOR ANTIPARPADEO) ---
window.actualizarTodoElSistema = function() {
    const totalDorado = document.getElementById('total-carrito');
    const totalOriginal = document.getElementById('cart-total');
    const precioViejo = document.getElementById('precio-viejo');

    if (typeof cart !== 'undefined' && totalOriginal) {
        const sumaBase = cart.reduce((acc, p) => {
            let pLimpio = parseFloat(String(p.precio || p.price).replace(/[$,]/g, '')) || 0;
            return acc + (pLimpio * (p.cantidad || 1));
        }, 0);

        let textoLimpio = totalOriginal.innerText.replace(/[$,]/g, '').trim();
        if (textoLimpio.includes(' ')) {
            const partes = textoLimpio.split(/\s+/);
            textoLimpio = partes[partes.length - 1];
        }

        let sumaActual = parseFloat(textoLimpio);
        if (isNaN(sumaActual) || sumaActual <= 0) sumaActual = sumaBase;

        const valorFinal = "$" + sumaActual.toFixed(0);
        if (totalOriginal.innerText !== valorFinal) {
            totalOriginal.innerText = valorFinal;
        }

        if (totalDorado) totalDorado.innerText = "$" + sumaActual.toFixed(2);
        
        const displaysPago = document.querySelectorAll('.pago-directo-total');
        displaysPago.forEach(el => el.innerText = "$" + sumaActual.toFixed(2));

        if (sumaActual < (sumaBase - 1) && precioViejo) {
            precioViejo.innerText = "$" + sumaBase.toFixed(2);
            precioViejo.style.display = "inline-block";
            precioViejo.style.marginRight = "8px";
            precioViejo.style.textDecoration = "line-through";
            precioViejo.style.color = "red";
        } else if (precioViejo) {
            precioViejo.style.display = "none";
        }
    }
};

const nodoPrecio = document.getElementById('cart-total');
if (nodoPrecio) {
    const observador = new MutationObserver(() => {
        observador.disconnect(); 
        window.actualizarTodoElSistema();
        observador.observe(nodoPrecio, { childList: true, characterData: true, subtree: true });
    });
    observador.observe(nodoPrecio, { childList: true, characterData: true, subtree: true });
}

setInterval(window.actualizarTodoElSistema, 1000);

window.obtenerSiguienteFolio = function() {
    let ultimoFolio = localStorage.getItem('ultimo_folio_axtelix') || 100;
    let nuevoFolio = parseInt(ultimoFolio) + 1;
    localStorage.setItem('ultimo_folio_axtelix', nuevoFolio);
    return "AXT-" + nuevoFolio;
};

window.pagoDirecto = function(metodo) {
    window.actualizarTodoElSistema();
    const mant = { paypal: true, mercado: true, transferencia: true };

    if (mant[metodo]) {
        const avisoMant = document.createElement('div');
        avisoMant.id = "aviso-mantenimiento";
        avisoMant.style = "position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:10000000; display:flex; justify-content:center; align-items:center; padding:20px;";
        avisoMant.innerHTML = `
            <div style="background:white; padding:30px; border-radius:24px; text-align:center; max-width:400px; font-family:sans-serif;">
                <div style="font-size:50px; margin-bottom:15px;">üõ†Ô∏è</div>
                <h2 style="color:#111;">Mantenimiento</h2>
                <p style="color:#666;">El pago por <b>${metodo.toUpperCase()}</b> no est√° disponible temporalmente.</p>
                <button onclick="document.getElementById('aviso-mantenimiento').remove()" style="margin-top:20px; background:black; color:white; border:none; padding:12px 30px; border-radius:12px; font-weight:bold; cursor:pointer; width:100%;">ENTENDIDO</button>
            </div>`;
        document.body.appendChild(avisoMant);
        return;
    }

    if (!cart || cart.length === 0) { alert("üõí Tu carrito est√° vac√≠o."); return; }

    const productosAgrupados = {};
    cart.forEach(p => {
        const nombre = p.nombre || p.titulo || p.name || p.title || "Producto";
        const talla = p.talla ? ` (${p.talla})` : "";
        const idUnico = nombre + talla;
        const precioUnitario = parseFloat(String(p.precio || p.price).replace(/[$,]/g, '')) || 0;
        if (productosAgrupados[idUnico]) {
            productosAgrupados[idUnico].cantidadTotal += (p.cantidad || 1);
        } else {
            productosAgrupados[idUnico] = { nombreDisplay: nombre + talla, cantidadTotal: (p.cantidad || 1), precioLimpio: precioUnitario };
        }
    });
    const listaFinal = Object.values(productosAgrupados);

    let totalExhibido = document.getElementById('total-carrito').innerText;
    const precioNumerico = totalExhibido.replace(/[^\d.]/g, ''); 
    const resumenDinamico = listaFinal.map(p => `${p.cantidadTotal}x ${p.nombreDisplay}`).join('\n- ');

    const checkoutCapa = document.createElement('div');
    checkoutCapa.id = "capa-checkout";
    checkoutCapa.style = "position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:9999999; display:flex; justify-content:center; align-items:center; padding:15px; box-sizing:border-box; font-family:sans-serif;";
    
    checkoutCapa.innerHTML = `
    <div style="background:white; width:100%; max-width:450px; border-radius:24px; padding:25px; position:relative; color:#333; text-align:center; max-height:90vh; overflow-y:auto;">
        <button onclick="document.getElementById('capa-checkout').remove()" style="position:absolute; top:15px; right:15px; border:none; background:none; font-size:30px; cursor:pointer; color:#999;">&times;</button>
        <h3 style="margin:0; color:#111;">Datos para el Env√≠o</h3>
        <p style="font-size:14px; color:#555; margin-bottom:15px;">Total: <b style="color:#d4af37;">${totalExhibido}</b></p>
        <input type="text" id="ins-nom" placeholder="Nombre completo" style="width:100%; padding:14px; margin-bottom:10px; border:1px solid #ddd; border-radius:12px; font-size:16px; box-sizing:border-box; color:black;">
        <input type="text" id="ins-dir" placeholder="Calle y N√∫mero" style="width:100%; padding:14px; margin-bottom:10px; border:1px solid #ddd; border-radius:12px; font-size:16px; box-sizing:border-box; color:black;">
        <input type="text" id="ins-logistica" placeholder="Colonia, CP, Ciudad" style="width:100%; padding:14px; margin-bottom:10px; border:1px solid #ddd; border-radius:12px; font-size:16px; box-sizing:border-box; color:black;">
        <input type="tel" id="ins-tel" placeholder="N√∫mero de WhatsApp" style="width:100%; padding:14px; margin-bottom:10px; border:1px solid #ddd; border-radius:12px; font-size:16px; box-sizing:border-box; color:black;">
        <textarea id="ins-ref" placeholder="Referencias de la casa" style="width:100%; padding:14px; margin-bottom:20px; border:1px solid #ddd; border-radius:12px; font-size:16px; box-sizing:border-box; height:80px; resize:none; color:black;"></textarea>
        <button id="btn-next-step" style="background:black; color:white; width:100%; padding:18px; border:none; border-radius:15px; font-weight:bold; cursor:pointer;">CONTINUAR</button>
    </div>`;
    document.body.appendChild(checkoutCapa);

    document.getElementById('btn-next-step').onclick = function() {
        const nom = document.getElementById('ins-nom').value.trim();
        const dir = document.getElementById('ins-dir').value.trim();
        const log = document.getElementById('ins-logistica').value.trim();
        const tel = document.getElementById('ins-tel').value.trim();
        const ref = document.getElementById('ins-ref').value.trim();

        if(!nom || !dir || !log || tel.length < 10) { alert("‚ö†Ô∏è Completa tus datos."); return; }
        const folioUnico = window.obtenerSiguienteFolio();
        
        // Texto legible del m√©todo
        const metodoTexto = metodo === 'paypal' ? 'PayPal' : metodo === 'mercado' ? 'Mercado Pago' : 'Transferencia Bancaria';

        let botonPago = metodo === 'paypal' ? `<a href="https://paypal.me/AxtelixOficial/${precioNumerico}" target="_blank" style="background:#ffc439; color:#003087; display:block; padding:18px; text-decoration:none; border-radius:15px; font-weight:bold; margin-top:10px;">PAGAR CON PAYPAL</a>` :
                        metodo === 'mercado' ? `<a href="https://link.mercadopago.com.mx/AxtelixOficial" target="_blank" style="background:#009ee3; color:white; display:block; padding:18px; text-decoration:none; border-radius:15px; font-weight:bold; margin-top:10px;">PAGAR CON MERCADO PAGO</a>` :
                        `<div style="background:#f4f4f4; padding:15px; border-radius:12px; text-align:left; border:1px solid #ddd; color:#333; font-size:13px;"><b>BANCO AZTECA / BBVA</b><br>CLABE: 000000000000000000</div>`;

        const modal = checkoutCapa.querySelector('div');
        modal.innerHTML = `
            <button onclick="document.getElementById('capa-checkout').remove()" style="position:absolute; top:15px; right:15px; border:none; background:none; font-size:30px; cursor:pointer; color:#999;">&times;</button>
            <h3 style="color:#111;">Resumen de Pedido</h3>
            <p style="font-size:12px; color:#d4af37; font-weight:bold;">FOLIO: ${folioUnico}</p>
            <div id="ticket-visual" style="background:#f9f9f9; border:1px solid #eee; border-radius:15px; padding:15px; text-align:left; font-size:13px; margin-bottom:15px; color:#333; max-height:200px; overflow-y:auto;">
                <p>üë§ <b>Cliente:</b> ${nom}</p>
                <p>üìç <b>Env√≠o:</b> ${dir}, ${log}</p>
                <p>üí≥ <b>Pago:</b> ${metodoTexto}</p>
                <hr style="border:0; border-top:1px dashed #ccc; margin:10px 0;">
                <p style="white-space: pre-line;">- ${resumenDinamico}</p>
                <p style="font-size:16px; color:#d4af37; margin-top:10px;"><b>Total: ${totalExhibido}</b></p>
            </div>
            ${botonPago}
            <button id="btn-descargar-img" style="background:white; color:black; width:100%; padding:12px; border:2px solid black; border-radius:12px; font-weight:bold; margin-top:10px; cursor:pointer;">üì• GUARDAR COMPROBANTE (FOTO)</button>
            <button id="btn-wsp" style="background:#25d366; color:white; width:100%; padding:18px; border:none; border-radius:15px; font-weight:bold; margin-top:15px; cursor:pointer;">ENVIAR A WHATSAPP üì≤</button>`;

        document.getElementById('btn-descargar-img').onclick = function() {
            if (typeof html2canvas === 'undefined') { alert("Error: html2canvas no carg√≥."); return; }
            const btn = this;
            btn.innerText = "‚åõ GENERANDO...";
            btn.disabled = true;

            const printElement = document.createElement('div');
            printElement.style = "position:absolute; left:-9999px; top:0; background:white; color:black; padding:40px; font-family:sans-serif; width:500px;";
            
            let filasTabla = listaFinal.map(p => `
                <tr>
                    <td style="border-bottom: 1px solid #eee; padding: 10px; text-align: center;">${p.cantidadTotal}</td>
                    <td style="border-bottom: 1px solid #eee; padding: 10px;">${p.nombreDisplay}</td>
                    <td style="border-bottom: 1px solid #eee; padding: 10px; text-align: right;">$${(p.precioLimpio * p.cantidadTotal).toFixed(2)}</td>
                </tr>
            `).join('');

            printElement.innerHTML = `
                <div style="border: 4px solid #d4af37; padding: 30px; border-radius: 15px;">
                    <h1 style="text-align:center; margin:0; font-size:40px;">AXTELIX</h1>
                    <p style="text-align:center; color:#d4af37; font-weight:bold; margin-bottom:20px;">TICKET DE COMPRA</p>
                    <p><b>FOLIO:</b> ${folioUnico}</p>
                    <p><b>FECHA:</b> ${new Date().toLocaleString()}</p>
                    <p><b>CLIENTE:</b> ${nom}</p>
                    <p><b>ENV√çO:</b> ${dir}, ${log}</p>
                    <p><b>M√âTODO DE PAGO:</b> ${metodoTexto}</p>
                    <table style="width:100%; border-collapse: collapse; margin: 20px 0; font-size: 14px;">
                        <thead>
                            <tr style="background: #f8f8f8;">
                                <th style="padding: 10px; border-bottom: 2px solid #d4af37;">CANT</th>
                                <th style="padding: 10px; border-bottom: 2px solid #d4af37; text-align: left;">PRODUCTO</th>
                                <th style="padding: 10px; border-bottom: 2px solid #d4af37; text-align: right;">PRECIO</th>
                            </tr>
                        </thead>
                        <tbody>${filasTabla}</tbody>
                    </table>
                    <h2 style="text-align:right; color:#d4af37;">TOTAL: ${totalExhibido}</h2>
                    <p style="text-align:center; font-size:12px; margin-top:30px;">Gracias por tu compra en Axtelix Store.</p>
                </div>`;
            document.body.appendChild(printElement);

            html2canvas(printElement, { scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Ticket_${folioUnico}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
                document.body.removeChild(printElement);
                btn.innerText = "üì• GUARDAR COMPROBANTE (FOTO)";
                btn.disabled = false;
            }).catch(e => {
                console.error(e);
                btn.innerText = "‚ùå ERROR";
                btn.disabled = false;
            });
        };

        document.getElementById('btn-wsp').onclick = function() {
            const msg = `üì¶ *AXTELIX SHOP - PEDIDO*\nüÜî *FOLIO:* ${folioUnico}\n\nüë§ *Cliente:* ${nom}\nüìç *Direcci√≥n:* ${dir}, ${log}\nüè† *Ref:* ${ref}\nüí∞ *Total:* ${totalExhibido}\nüí≥ *M√©todo:* ${metodoTexto}\n\nüõçÔ∏è *Items:* \n- ${resumenDinamico}`;
            window.open(`https://wa.me/527206181781?text=${encodeURIComponent(msg)}`, "_blank");
            checkoutCapa.remove();
        };
    };
};


// --- DESBLOQUEADOR DE DETALLES AXTELIX ---
setInterval(() => {
    // Buscamos todos los elementos que parezcan botones de detalles
    const botonesDetalles = document.querySelectorAll('.Detalles, a[onclick], button[onclick]');
    
    botonesDetalles.forEach(btn => {
        if (btn.innerText.toLowerCase().includes('detalles')) {
            // Quitamos cualquier restricci√≥n de clics
            btn.style.pointerEvents = 'auto';
            btn.style.zIndex = '9999999';
            
            // Si el padre tiene pointer-events: none, lo corregimos solo para que deje pasar clics
            if (btn.parentElement) {
                btn.parentElement.style.pointerEvents = 'auto';
            }
        }
    });
}, 500);


// =======================================================
// CONEXI√ìN DIN√ÅMICA CON GOOGLE SHEETS + PRELOADER AXTELIX
// =======================================================
// Aseg√∫rate de que esta URL sea la correcta arriba en tu script
const URL_SINCRO = "https://axtelix-backend.onrender.com/obtener-inventario";

async function actualizarInventarioReal() {
    console.log("Iniciando sincronizaci√≥n con la nube...");
    const loader = document.getElementById('loader-axtelix');
    const letras = document.querySelectorAll('.letra');
    const wspBtn = document.querySelector('.joinchat, .whatsapp-button, [class*="whatsapp"]');

    if (wspBtn) wspBtn.style.display = 'none';

    try {
        // A√±adimos un timestamp para saltar el cach√© del navegador
        const respuesta = await fetch(URL_SINCRO + "?v=" + Date.now());
        const datosNuevos = await respuesta.json();

        if (datosNuevos && datosNuevos.length > 0) {
            // 1. Limpiamos las listas actuales
            PERFUMERIA = []; 
            TECNOLOGIA = []; 
            CALZADO = []; 
            SOFTWARE = [];

            // 2. Repartimos cada producto del Excel
            datosNuevos.forEach(p => {
                const catExcel = p.Categoria ? p.Categoria.toLowerCase().trim() : '';
                const productoFormateado = {
                    nombre: p.Producto,
                    precio: parseFloat(p.Precio_Venta), 
                    img: p.Imagen_URL,
                    desc: p.Descripcion,
                    stock: p.Stock,
                    cat: p.Categoria
                };

                if (catExcel.includes('perfume')) PERFUMERIA.push(productoFormateado);
                else if (catExcel.includes('tecnolog')) TECNOLOGIA.push(productoFormateado);
                else if (catExcel.includes('calzado') || catExcel.includes('shoes')) CALZADO.push(productoFormateado);
                else if (catExcel.includes('soft') || catExcel.includes('web')) SOFTWARE.push(productoFormateado);
            });

            // 3. Actualizamos la lista global
            productos = [...PERFUMERIA, ...TECNOLOGIA, ...CALZADO, ...SOFTWARE];
            
            // 4. USAMOS EL NOMBRE CORRECTO: mostrarProductos
            if (typeof mostrarProductos === "function") {
                mostrarProductos('todos'); 
            }
            
            console.log("‚úÖ ¬°Tienda sincronizada! Alineando letras...");

            // --- EFECTO VISUAL FINAL ---
            letras.forEach(l => {
                l.style.animation = "none";
                l.style.opacity = "1";
                l.style.filter = "blur(0)";
                l.style.transform = l.style.getPropertyValue('--destino');
                l.style.textShadow = "0 0 20px #00d4ff, 0 0 40px #fff";
            });
            
            setTimeout(() => {
                if (loader) {
                    loader.style.transition = 'opacity 0.8s ease, filter 0.8s ease';
                    loader.style.opacity = '0';
                    loader.style.filter = 'blur(20px)';
                    
                    setTimeout(() => {
                        loader.style.display = 'none';
                        if (wspBtn) {
                            wspBtn.style.display = 'block';
                            wspBtn.style.opacity = '0';
                            wspBtn.style.transition = 'opacity 1s ease';
                            setTimeout(() => { wspBtn.style.opacity = '1'; }, 100);
                        }
                    }, 800);
                }
            }, 1200);
        }
    } catch (error) {
        console.warn("‚ö†Ô∏è Error de conexi√≥n con Render. Saltando al inventario de respaldo.");
        if (loader) loader.style.display = 'none';
        if (wspBtn) wspBtn.style.display = 'block';
    }
}

window.addEventListener('load', actualizarInventarioReal);
// =======================================================

    </script>
    <a href="https://wa.me/527206181781?text=Hola%20Axtelix,%20Me%20Gustaria%20Mas%20Informacion%20Acerca%20De%20Los%20Productos%20Que%20Tienen%20Disponibles%20Actualmente" 
   style="position:fixed; width:55px; height:55px; bottom:25px; right:25px; background-color:#25d366; color:#FFF; border-radius:50px; text-align:center; font-size:30px; box-shadow: 2px 2px 5px rgba(0,0,0,0.3); z-index:10000; display:flex; align-items:center; justify-content:center; text-decoration:none;" 
   target="_blank">
   <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" style="width: 35px;">
</a>
</body>
</html>