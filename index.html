<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axtelix | Premium Store</title>
    <link rel="icon" type="image/x-icon" href="logo-wp.jpeg">

    <style>
        html { scroll-behavior: smooth; }

        body {
            background-color: #0a0a0a;
            color: #ffffff;
            font-family: 'Helvetica', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* Estado Agotado */
        .product-card.sold-out {
            opacity: 0.7;
            filter: grayscale(0.8);
            pointer-events: none; /* Evita que sigan dando clic */
        }

        .badge-agotado {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
            background: #444; /* Gris oscuro para diferenciar de la oferta roja */
            color: white;
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
            transform: skewX(7deg); /* Para que el texto se vea derecho en la tarjeta ladeada */
        }

        /* Estilo del bot√≥n cuando est√° agotado */
        .product-card.sold-out .btn-add-cart {
            background-color: #333 !important;
            color: #777 !important;
            cursor: not-allowed;
        }


        /* Clase para ocultar productos en el buscador */
        .product-card.hidden {
            display: none !important;
        }


        /* --- SMART LIFE GEAR (AHORA DEBAJO DE AXTELIX) --- */
        .slogan-animado {
            font-size: 0.7em;
            color: #888;
            letter-spacing: 2px;
            display: block; /* Cambiado a block para estar debajo */
            margin-top: 5px;
            transition: all 0.5s ease;
            cursor: default;
        }

        .slogan-animado:hover {
            letter-spacing: 6px;
            color: #d4af37;
        }

        .slogan-animado span {
            display: inline-block;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slogan-animado:hover span {
            animation: salto-giro-completo 0.8s ease forwards, 
                       parpadeo-contorno 1s infinite alternate;
        }

        @keyframes salto-giro-completo {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }

        @keyframes parpadeo-contorno {
            from { text-shadow: 0 0 2px #fff, 0 0 5px #d4af37; }
            to { text-shadow: 0 0 8px #d4af37, 0 0 15px #d4af37; }
        }

        header {
            padding: 40px 20px 10px 20px;
            text-align: center;
            text-transform: uppercase;
        }

        header h1 {
            display: inline-block;
            margin: 0;
            padding: 5px 30px;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            letter-spacing: 5px;
            border-radius: 50px;
            position: relative;
        }

        header h1:hover {
            letter-spacing: 15px; 
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.8);
            color: #d4af37;
            animation: glow-pulse 1.5s infinite;
        }

        @keyframes glow-pulse {
            0% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }
            50% { box-shadow: 0 0 40px rgba(212, 175, 55, 0.9); }
            100% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }
        }

        /* --- BUSCADOR CON LUPA FELIZ --- */
        .search-wrapper {
            max-width: 400px;
            margin: 20px auto;
            position: relative;
            padding: 0 20px;
        }

        #productSearch {
            width: 100%;
            padding: 12px 15px;
            border-radius: 25px;
            border: 1px solid #333;
            background: #1a1a1a;
            color: white;
            outline: none;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #productSearch:focus { 
            border-color: #d4af37;
            letter-spacing: 1px;
        }

        .lupa-emoji {
            position: absolute;
            right: 35px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            display: inline-block;
            transition: all 0.3s;
        }

        /* Animaci√≥n de la lupa al dar click */
        .lupa-feliz {
            animation: salto-giro-lupa 0.7s ease-out forwards;
        }

        @keyframes salto-giro-lupa {
            0% { transform: translateY(-50%) scale(1) rotate(0deg); }
            30% { transform: translateY(-100%) scale(1.5) rotate(0deg); }
            100% { transform: translateY(-50%) scale(1) rotate(360deg); }
        }

        /* --- CARRITO Y BOTONES DENTRO DEL MODAL --- */
        .cupon-wrapper:hover {
            border-color: #d4af37;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            transition: 0.3s;
        }

        .btn-cupon:hover {
            animation: parpadeo-contorno 1s infinite alternate;
        }

        .btn-whatsapp-cart {
            background: #25d366;
            color: white;
            width: 100%;
            padding: 15px;
            border: 1px solid transparent;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 0px;
        }

        /* Efecto de letras separadas y brillo suave */
        .btn-whatsapp-cart:hover {
            letter-spacing: 2px;
            background: #20ba5a;
            box-shadow: 0 0 15px rgba(37, 211, 102, 0.5);
            border-color: #fff;
        }

        /* --- CATEGOR√çAS Y PRODUCTOS --- */
        .category-title {
            text-align: center;
            letter-spacing: 3px;
            margin-top: 40px;
            color: #d4af37;
            text-transform: uppercase;
            font-size: 1.1em;
            transition: all 0.4s ease;
            cursor: default;
        }

        .category-title:hover {
            letter-spacing: 8px;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .cart-icon-fixed {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #d4af37;
            color: black;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
            transition: transform 0.2s;
        }

        .cart-pop {
            animation: pop-animation 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #ffffff !important; 
        }

        @keyframes pop-animation {
            0% { transform: scale(1); }
            50% { transform: scale(1.6); box-shadow: 0 0 40px #d4af37; }
            100% { transform: scale(1); }
        }

        .slider-wrapper {
            position: relative;
            width: 90%;
            max-width: 1100px;
            margin: 0 auto 40px auto;
            display: flex;
            align-items: center;
        }

        .container {
            display: flex;
            overflow-x: hidden;
            gap: 20px;
            padding: 20px 0;
            width: 100%;
        }

        /* 1. Contenedor: Solo 3 productos visibles con buen espacio */
        .product-grid {
            display: flex;
            gap: 80px; /* Mucho espacio para que no se peguen los rayos */
            justify-content: center;
            padding: 60px 20px;
        }

        /* 1. LA TARJETA: Le quitamos el clip-path y el overflow:hidden */
        .product-card {
            flex: 0 0 300px;
            height: 520px; /* Dale un poco m√°s de altura para que quepa todo abajo */
            position: relative;
            background: transparent; /* Para que el fondo no tape nada */
            overflow: visible; /* IMPORTANTE: para que la oferta y botones se vean */
            transition: all 0.5s ease;
        }

        /* 1.1 EL BORDE DORADO DE CARGA */
        .product-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border: 2px solid #f1c40f;
            z-index: 10;
            pointer-events: none;
            clip-path: inset(0 100% 100% 0);
            transition: clip-path 0.7s ease-in-out;
        }

        .product-card:hover::before {
            clip-path: inset(0 0 0 0);
        }

        .product-card:hover img {
            filter: grayscale(0%) brightness(100%);
        }

        /* 2. LA IMAGEN: Aqu√≠ es donde aplicamos el recorte de Rayo */
        .product-card img {
            width: 100%;
            height: 300px; /* Ajusta la altura de la foto */
            object-fit: cover;
            /* Movemos el recorte de rayo solo a la foto */
            clip-path: polygon(0% 0%, 100% 0%, 100% 80%, 50% 100%, 0% 80%);
            filter: grayscale(100%) brightness(30%);
            transition: all 0.6s ease;
        }

        .product-card:hover img {
            filter: grayscale(0%) brightness(100%);
        }

        /* 3. MOVER LA OFERTA PARA QUE NO TAPE EL NOMBRE */
        .badge-oferta {
            position: absolute;
            top: -10px; /* S√∫bela arriba de la foto */
            left: 10px;
            z-index: 50; 
            background: #ff4d4d;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.7rem;
            color: white;
        }

        /* 4. BOT√ìN Y DETALLES: Aseg√∫rate que no tengan posici√≥n absoluta rara */
        .product-info {
            padding-top: 15px; /* Espacio despu√©s del rayo de la foto */
            text-align: center;
        }

        .a√±adir-carrito {
            display: block;
            margin: 10px auto;
            background: white;
            color: black;
            padding: 8px 15px;
            border: none;
            cursor: pointer;
        }

        .product-info h3 {
            font-size: 0.9rem;
            color: #f1c40f; /* Dorado para el nombre */
        }

        /* AJUSTE PARA M√ìVIL (2 productos o 1) */
        @media (max-width: 768px) {
        .product-grid {
            gap: 30px;
            overflow-x: auto;
            justify-content: flex-start;
        }
        .product-card {
            flex: 0 0 75%; /* Se ve uno y medio para invitar a deslizar */
        }
    }

        .badge-oferta {
            position: absolute;
            /* 1. S√∫bela m√°s para que salga del √°rea del nombre */
            top: -15px; 
    
            /* 2. Mu√©vela a la izquierda o derecha seg√∫n prefieras */
            left: 10px; 
    
            /* 3. Aseg√∫rate de que nada la tape */
            z-index: 100; 
    
            /* Opcional: un sombreado para que resalte en el fondo negro */
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
    
            /* Estilo visual r√°pido */
            background-color: #ff4d4d;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
        }

        .price { color: #d4af37; font-size: 1.2em; font-weight: bold; display: block; margin-bottom: 10px; }
        
        .old-price {
            text-decoration: line-through;
            color: #666;
            font-size: 0.8em;
            margin-right: 8px;
        }

        .btn-add-cart {
            display: inline-block;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #000;
            font-weight: bold;
            font-size: 0.75em;
            text-transform: uppercase;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .btn-add-cart:active {
            transform: scale(0.95);
            background-color: #d4af37;
        }

        .btn-details {
            background: transparent;
            color: #888;
            border: none;
            text-decoration: underline;
            font-size: 0.8em;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .arrow-btn {
            position: absolute;
            background: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }
        .prev { left: -20px; } .next { right: -20px; }

        .trust-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 40px 20px;
            background: #0f0f0f;
            text-align: center;
            margin-top: 50px;
        }
        .trust-item { flex: 1; min-width: 200px; padding: 20px; }
        .trust-item h4 { color: #d4af37; font-size: 0.9em; margin-bottom: 10px; }
        .trust-item p { color: #888; font-size: 0.8em; }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.95);
        }

        .modal-content {
            background-color: #1a1a1a;
            margin: 5% auto;
            padding: 30px;
            width: 85%;
            max-width: 600px;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid #333;
            line-height: 1.6;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }

        /* Este es el nombre del producto */
        .cart-item span:first-child {
            color: #ffffff; /* Blanco para el nombre */
            flex: 1;
        }

        /* Este es el precio (el segundo span) */
        .cart-item span:nth-child(2) {
            color: #f1c40f; /* El dorado de tu marca */
            font-weight: bold;
            margin-right: 15px; /* Espacio antes de la X roja */
            min-width: 70px;
            text-align: right;
        }

        /* El nombre ocupar√° todo el espacio disponible */
        .cart-item span:first-child {
            flex-grow: 1;
            text-align: left;
            font-size: 0.95em;
        }

        /* El precio tendr√° un ancho fijo para que todos los $ se alineen igual */
        .cart-item span:nth-child(2) {
            min-width: 80px; 
            text-align: right;
            font-weight: bold;
            color: #d8e616; /* Dorado Axtelix */
        }

        .legal-link { color: #555; text-decoration: underline; cursor: pointer; font-size: 0.8em; margin: 0 10px; }

        .cupon-wrapper {
            margin: 15px 0;
            padding: 15px;
            background: #111;
            border-radius: 8px;
            border: 1px dashed #444;
            transition: all 0.3s;
        }
        .cupon-input-group {
            display: flex;
            gap: 10px;
        }
        #input-cupon {
            flex: 1;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #333;
            background: #000;
            color: white;
        }
        .btn-cupon {
            background: #d4af37;
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }
    </style>
</head>
<body>

    <div class="cart-icon-fixed" id="cart-icon" onclick="openModal('cartModal')">
        üõí <span id="cart-count">0</span>
    </div>

    <header>
        <h1>Axtelix</h1>
        <p class="slogan-animado">
            <span>S</span><span>M</span><span>A</span><span>R</span><span>T</span>&nbsp;
            <span>L</span><span>I</span><span>F</span><span>E</span>&nbsp;
            <span>G</span><span>E</span><span>A</span><span>R</span>
        </p>
    </header>

    <div class="search-wrapper">
        <input type="text" id="productSearch" placeholder="Buscar en el cat√°logo..." onkeyup="filterProducts()" onclick="animarLupa()">
        <span class="lupa-emoji" id="lupa">üîç</span>
    </div>

    <h3 class="category-title">Perfumer√≠a</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-perfumes', -1)">&#10094;</button>
        <div class="container" id="container-perfumes"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-perfumes', 1)">&#10095;</button>
    </div>

    <h3 class="category-title">Tecnolog√≠a</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-tech', -1)">&#10094;</button>
        <div class="container" id="container-tech"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-tech', 1)">&#10095;</button>
    </div>

    <h3 class="category-title">Calzado</h3>
    <div class="slider-wrapper">
        <button class="arrow-btn prev" onclick="scrollSlider('container-shoes', -1)">&#10094;</button>
        <div class="container" id="container-shoes"></div>
        <button class="arrow-btn next" onclick="scrollSlider('container-shoes', 1)">&#10095;</button>
    </div>

    <div class="trust-section">
        <div class="trust-item">
            <h4>üöö ENV√çOS</h4>
            <p>De 5 a 7 d√≠as h√°biles a todo M√©xico.</p>
        </div>
        <div class="trust-item">
            <h4>üí≥ PAGOS</h4>
            <p>Transferencias, Dep√≥sitos y Tarjetas v√≠a WhatsApp.</p>
        </div>
        <div class="trust-item">
            <h4>‚≠ê CONFIANZA</h4>
            <p>Garant√≠a de entrega y productos de alta calidad.</p>
        </div>
        <div class="trust-item">
            <h4>üì± ATENCI√ìN</h4>
            <p>Soporte de lunes - viernes 9:00AM - 6:00PM v√≠a WhatsApp.</p>
        </div>
    </div>

    <footer style="padding: 40px 20px; text-align: center;">
        <p>
            <span class="legal-link" onclick="openModal('legalModal')">T√©rminos y Condiciones</span> |
            <span class="legal-link" onclick="openModal('aboutModal')">Qui√©nes Somos</span> |
            <span class="legal-link" onclick="openModal('payModal')">Formas de Pago</span>
        </p>
        <p style="font-size: 0.7em; color:#444;">¬© 2026 AXTELIX STORE</p>
    </footer>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer;" onclick="closeModal('cartModal')">‚úñ</span>
            <h2>Mi Pedido</h2>
            <div id="cart-items-container"></div>
            
            <div class="cupon-wrapper">
                <p style="font-size: 0.8em; margin-bottom: 5px; color: #aaa;">¬øTienes un cup√≥n?</p>
                <div class="cupon-input-group">
                    <input type="text" id="input-cupon" placeholder="C√≥digo">
                    <button class="btn-cupon" onclick="aplicarCupon()">Canjear</button>
                </div>
                <p id="mensaje-cupon" style="font-size: 0.7em; margin-top: 5px;"></p>
                <p style="font-size: 0.65em; margin-top: 10px; color: #777;">VERIFICACI√ìN IMPORTANTE: Los cupones de Axtelix operan bajo un sistema de reporte inmediato. Al aplicar su c√≥digo, el servidor valida la disponibilidad de la oferta en tiempo real. Por favor, aseg√∫rese de una conexi√≥n estable para permitir el enlace autom√°tico; sin el reporte de validaci√≥n al instante, el descuento no podr√° aplicarse al total.</p>
            </div>

            <hr style="border:1px solid #333; margin:15px 0;">
            <div style="display:flex; justify-content:space-between; font-weight:bold;">
                <span>Total:</span><span id="cart-total">$0</span>
            </div>
            <button class="btn-whatsapp-cart" onclick="sendWhatsApp()">Confirmar por WhatsApp</button>
        </div>
    </div>

    <div id="legalModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('legalModal')">‚úñ</span>
        <h2>T√©rminos y Condiciones</h2>
        <p>
            1. <b>Modelo:</b> Axtelix opera bajo un modelo de Dropshipping. Al comprar, reconoces que somos intermediarios entre proveedores internacionales y t√∫.<br>
            2. <b>Garant√≠a:</b> Solo por defectos de f√°brica reportados en 48h despu√©s de recibir el producto.<br>
            3. <b>Env√≠os:</b> Tiempo estimado de 5 a 7 d√≠as h√°biles. Puede extenderse en casos excepcionales.<br>
            4. <b>Cancelaciones:</b> No se aceptan una vez procesado el env√≠o.<br>
            5. <b>Precios:</b> Expresados en MXN. Las ofertas que aparecen son por tiempo limitado.<br>
            6. <b>Facturaci√≥n:</b> Para facturas fiscales, contactar v√≠a WhatsApp antes de pagar.
        </p>
    </div>
</div>

<div id="aboutModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('aboutModal')">‚úñ</span>
        <h2>Qui√©nes Somos</h2>
        <p>
            Bienvenido a <b>Axtelix</b>, m√°s que una tienda, somos sus aliados en la b√∫squeda de la distinci√≥n. 
            Nuestra misi√≥n es simplificar el acceso a lo extraordinario, seleccionando cuidadosamente cada pieza de nuestra colecci√≥n de perfumer√≠a fina, tecnolog√≠a de vanguardia y calzado de edici√≥n especial. 
            Nos mueve la pasi√≥n por los detalles y el compromiso de acompa√±arle en cada paso de su elecci√≥n. 
            Creemos que el lujo no solo reside en el producto, sino en la tranquilidad de recibir calidad y una atenci√≥n impecable. 
            Estamos aqu√≠ para servirle y elevar su experiencia de compra a un est√°ndar superior.
        </p>
    </div>
</div>

<div id="payModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('payModal')">‚úñ</span>
        <h2>Formas de Pago</h2>
        <p>
            ‚Ä¢ <b>PayPal</b><br>
            ‚Ä¢ <b>Transferencia Bancaria (SPEI)</b><br>
            ‚Ä¢ <b>Dep√≥sito en OXXO</b><br>
            ‚Ä¢ <b>Pago con Tarjeta</b> (Mercado Pago / Clip)
        </p>
    </div>
</div>

<div id="detailsModal" class="modal">
    <div class="modal-content">
        <span style="float:right; cursor:pointer;" onclick="closeModal('detailsModal')">‚úñ</span>
        <h2 id="detailName"></h2>
        <p id="detailInfo"></p>
    </div>
</div>

    <script>
        let cart = [];
        let descuentoAplicado = 0;

        const PERFUMERIA = [
            { cat: 'perfumes', nombre: 'JPG Elixir', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'jpgelixir-wp.jpeg', desc: '125ml. El aroma del momento.' },
            { cat: 'perfumes', nombre: 'Sauvage Dior Elixir', precio: 1099, oferta: false, agotado: false, img: 'sauvageDior-wp.jpeg', desc: '100ml. El cl√°sico infaltable.' },
            { cat: 'perfumes', nombre: 'Bleu De Chanel', precio: 1299, precioOriginal: 1500, oferta: false, agotado: false, img: 'bleuofchanel-wp.jpeg', desc: '100ml. Elegancia pura.' },
            { cat: 'perfumes', nombre: 'Versace', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'versace1-wp.png', desc: 'Inspirado en la mitolog√≠a griega.' },
            { cat: 'perfumes', nombre: 'Stronger With You Absolutely', precio: 1249, precioOriginal: 1500, oferta: false, agotado: false, img: 'stronger1-wp.png', desc: 'El poder del amor absoluto.' },
            { cat: 'perfumes', nombre: 'JPG Scandal Le Parfum', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'scandal-wp.png', desc: 'Para el hombre que destaca.' },
            { cat: 'perfumes', nombre: '9PM Rebel', precio: 949, precioOriginal: 1500, oferta: false, agotado: false, img: '9pmrebel-wp.png', desc: 'La opci√≥n perfecta para la noche.' },
            { cat: 'perfumes', nombre: 'JPG Le Male Le Parfum', precio: 1299, precioOriginal: 1500, oferta: false, agotado: false, img: 'lemale-wp.jpeg', desc: 'Versi√≥n intensa del cl√°sico.' },
            { cat: 'perfumes', nombre: 'Valentino Born In Roma Rockstud', precio: 1199, precioOriginal: 1500, oferta: false, agotado: false, img: 'valentino1-wp.jpeg', desc: 'Fragancia oscura y arom√°tica.' },
            { cat: 'perfumes', nombre: 'Bad Boy Le Parfum', precio: 1150, oferta: false, agotado: false, img: 'badboy-wp.jpeg', desc: '100ml. Electrizante.' },
            { cat: 'perfumes', nombre: 'Dylan Blue', precio: 899, precioOriginal: 1650, oferta: false, agotado: false, img: 'dylanblue-wp.jpg', desc: 'El equilibrio perfecto entre frescura marina y seducci√≥n intensa.' },
            { cat: 'perfumes', nombre: 'Bad Boy Cobalt Elixir', precio: 1150, precioOriginal: 1650, oferta: false, agotado: false, img: 'cobalt-wp.jpg', desc: 'Electrizante y fresco. La esencia del hombre moderno y audaz.' },
            { cat: 'perfumes', nombre: 'Club de Nuit Intense Man', precio: 850, precioOriginal: 1650, oferta: false, agotado: false, img: 'clubnuit-wp.jpg', desc: 'Lujoso y potente. Un aroma que proyecta √©xito en cada paso.' },
            { cat: 'perfumes', nombre: 'JPG Paradise Garden', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'paradise-wp.jpg', desc: 'Ex√≥tico y tropical. Un viaje sensorial al para√≠so prohibido.' },
            { cat: 'perfumes', nombre: 'Azzaro The Most Wanted', precio: 1050, precioOriginal: 1650, oferta: false, agotado: false, img: 'azzaro-wp.jpg', desc: 'El arma de seducci√≥n definitiva. Dulce, especiado e irresistible.' },
            { cat: 'perfumes', nombre: 'JPG Le Male Elixir Absolu', precio: 1299, precioOriginal: 1650, oferta: false, agotado: false, img: 'absolu-wp.jpg', desc: 'Intenso como el oro. Una mezcla ardiente de vainilla y lavanda.' },
            { cat: 'perfumes', nombre: 'Versace Eros Flame', precio: 849, precioOriginal: 1650, oferta: false, agotado: false, img: 'VersaceErosFlame-wp.jpg', desc: 'Pasi√≥n en estado puro. Notas c√≠tricas y amaderadas que queman.' },
            { cat: 'perfumes', nombre: '212 VIP Black', precio: 849, precioOriginal: 1650, oferta: false, agotado: false, img: '212black-wp.jpg', desc: 'El alma de la fiesta. Un aroma explosivo, dulce y magn√©tico.' },
            { cat: 'perfumes', nombre: 'Lattafa Khamrah', precio: 950, precioOriginal: 1650, oferta: false, agotado: false, img: 'khamrahL-wp.jpg', desc: 'Lujo √°rabe embotellado. C√°lido, dulce y extremadamente adictivo.' },
            { cat: 'perfumes', nombre: 'Hawas Ice', precio: 899, precioOriginal: 1650, oferta: false, agotado: false, img: 'hawasHice-wp.jpg', desc: 'Frescura glacial. La versi√≥n m√°s potente y fr√≠a del legendario Hawas.' }
        ];

        const TECNOLOGIA = [
            { cat: 'tech', nombre: 'Iphone 17 Pro', precio: 14999, precioOriginal: 23499, oferta: true, agotado: false, img: 'iphone17-wp.jpeg', desc: '256GB Titanium.' },
            { cat: 'tech', nombre: 'Airpods Pro 2G', precio: 899, precioOriginal: 1200, oferta: false, agotado: false, img: 'airpods-wp.jpeg', desc: 'Cancelaci√≥n de ruido.' },
            { cat: 'tech', nombre: 'Cargador Inal√°mbrico MagSafe Pro', precio: 449, oferta: false, agotado: false, img: 'cargador-wp.png', desc: 'Optimiza la carga de tu iPhone.' }
        ];

        const CALZADO = [
            { cat: 'shoes', nombre: 'Nike Dunk Low', precio: 1390, precioOriginal: 2549, oferta: true, agotado: false, img: 'nike-wp.jpeg', desc: 'Calidad Garantizada. Tallas 23-29 MX.' },
            { cat: 'shoes', nombre: 'PR√ìXIMAMENTE', precio: 0, oferta: false, agotado: false, img: '-wp.jpeg', desc: 'Proximamente disponible.' },
            { cat: 'shoes', nombre: 'PR√ìXIMAMENTE', precio: 0, oferta: false, agotado: false, img: '-wp.jpeg', desc: 'Proximamente disponible.' }
        ];

        const INVENTARIO = [...PERFUMERIA, ...TECNOLOGIA, ...CALZADO];

        function renderizarProductos() {
            const contenedores = {
                perfumes: document.getElementById('container-perfumes'),
                tech: document.getElementById('container-tech'),
                shoes: document.getElementById('container-shoes')
            };

            Object.values(contenedores).forEach(c => { if(c) c.innerHTML = ''; });

            INVENTARIO.forEach(p => {
    const esAgotado = p.agotado ? 'sold-out' : '';
    const badgeAgotado = p.agotado ? `<div class="badge-agotado">SOLD OUT</div>` : '';
    const badgeOferta = p.oferta && !p.agotado ? `<div class="badge-oferta">OFERTA üî•</div>` : '';
    
    // Si est√° agotado, el bot√≥n dir√° "SIN STOCK"
    const textoBoton = p.agotado ? "SIN STOCK" : "A√ëADIR AL CARRITO";

    const html = `
        <div class="product-card ${esAgotado}">
            ${badgeOferta}
            ${badgeAgotado}
            <h3>${p.nombre}</h3>
            <span class="price">$${p.precio}</span>
            <img src="${p.img}" onclick="showProductDetails('${p.nombre}', '${p.desc}')">
            <button class="btn-details" onclick="showProductDetails('${p.nombre}', '${p.desc}')">Detalles</button>
            <button class="btn-add-cart" onclick="addToCart('${p.nombre}', ${p.precio}, this)" ${p.agotado ? 'disabled' : ''}>
                ${textoBoton}
            </button>
        </div>
    `;
    if (contenedores[p.cat]) contenedores[p.cat].innerHTML += html;
});
        }

        // --- ANIMACI√ìN DE LA LUPA ---
        function animarLupa() {
            const lupa = document.getElementById('lupa');
            const searchInput = document.getElementById('productSearch');
            
            // Efecto lupa feliz gira
            lupa.classList.add('lupa-feliz');
            setTimeout(() => {
                lupa.classList.remove('lupa-feliz');
                // Expandir texto (letter-spacing)
                searchInput.style.letterSpacing = "2px";
            }, 700);
        }

        function scrollSlider(id, direction) {
            const container = document.getElementById(id);
            const scrollAmount = 320 * direction;
            const start = container.scrollLeft;
            const duration = 1450;
            let startTime = null;

            function animation(currentTime) {
                if (startTime === null) startTime = currentTime;
                const timeElapsed = currentTime - startTime;
                const progress = Math.min(timeElapsed / duration, 1);
                const ease = progress < 0.5 ? 2 * progress * progress : 1 - Math.pow(-2 * progress + 2, 2) / 2;
                container.scrollLeft = start + (scrollAmount * ease);
                if (timeElapsed < duration) requestAnimationFrame(animation);
            }
            requestAnimationFrame(animation);
        }

        function addToCart(name, price, btnElement) {
            cart.push({name, price});
            const cartIcon = document.getElementById('cart-icon');
            cartIcon.classList.remove('cart-pop');
            void cartIcon.offsetWidth; 
            cartIcon.classList.add('cart-pop');
            
            btnElement.innerText = "¬°A√ëADIDO!";
            btnElement.style.backgroundColor = "#d4af37";
            setTimeout(() => {
                btnElement.innerText = "A√ëADIR AL CARRITO";
                btnElement.style.backgroundColor = "#ffffff";
            }, 800);
            updateCartUI();
        }

        function updateCartUI() {
    document.getElementById('cart-count').innerText = cart.length;
    const container = document.getElementById('cart-items-container');
    const totalEl = document.getElementById('cart-total');
    container.innerHTML = '';
    let subtotal = 0;

    // 1. Agrupamos los productos por nombre para sumar cantidades
    const cartGrouped = {};
    cart.forEach((item, index) => {
        subtotal += item.price;
        if (cartGrouped[item.name]) {
            cartGrouped[item.name].quantity += 1;
            // Guardamos el primer √≠ndice que encontremos para que el bot√≥n eliminar funcione
            cartGrouped[item.name].originalIndices.push(index);
        } else {
            cartGrouped[item.name] = { 
                ...item, 
                quantity: 1, 
                originalIndices: [index] 
            };
        }
    });

    // 2. Renderizamos los productos ya agrupados
    Object.values(cartGrouped).forEach(item => {
        const lastIndex = item.originalIndices[item.originalIndices.length - 1];
        container.innerHTML += `
        <div class="cart-item">
        <span>${item.quantity}x ${item.name}</span>
        <span>$${item.price * item.quantity}</span>
        <button onclick="removeFromCart(${lastIndex})" 
                style="background:none; border:none; color:#ff4d4d; cursor:pointer; font-size:16px; margin-left:10px;">
            ‚úñ
        </button>
    </div>`;
    });

    // 3. L√≥gica del total con descuento (se queda igual a como la ten√≠as)
    let finalTotal = subtotal - descuentoAplicado;
    if(finalTotal < 0) finalTotal = 0;
    
    totalEl.innerHTML = descuentoAplicado > 0 
        ? `<small style="color:red; text-decoration:line-through;">$${subtotal}</small> $${finalTotal}`
        : `$${subtotal}`;
}

        async function aplicarCupon() {
            const input = document.getElementById('input-cupon').value.trim().toUpperCase();
            const mensaje = document.getElementById('mensaje-cupon');
            if (!input) return;
            mensaje.style.color = "white";
            mensaje.innerText = "Validando...";

            try {
                const respuesta = await fetch('https://axtelix-backend.onrender.com/validar-cupon', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ codigo: input })
                });
                const data = await respuesta.json();
                if (data.valido) {
                    descuentoAplicado = data.descuento;
                    mensaje.style.color = "#25d366";
                    mensaje.innerText = `¬°Cup√≥n Aplicado! -$${descuentoAplicado} MXN`;
                    updateCartUI();
                } else {
                    mensaje.style.color = "red";
                    mensaje.innerText = data.mensaje;
                }
            } catch (error) {
                mensaje.style.color = "orange";
                mensaje.innerText = "Error de conexi√≥n.";
            }
        }

        function removeFromCart(index) { 
            cart.splice(index, 1); 
            updateCartUI(); 
        }

        function sendWhatsApp() {
    if(cart.length === 0) return alert("El carrito est√° vac√≠o");

    let subtotal = 0;
    const cartGrouped = {};

    // 1. Agrupamos y sumamos el subtotal
    cart.forEach(item => {
        subtotal += item.price;
        cartGrouped[item.name] = (cartGrouped[item.name] || 0) + 1;
    });

    let msg = "¬°Hola Axtelix! Deseo comprar:%0A";

    // 2. Creamos la lista con el formato "2x Producto"
    for (const [name, quantity] of Object.entries(cartGrouped)) {
        msg += `- ${quantity}x ${name}%0A`;
    }

    // 3. C√°lculo de totales (manteniendo tu l√≥gica de cupones)
    let totalFinal = subtotal - descuentoAplicado;
    if(totalFinal < 0) totalFinal = 0;

    if(descuentoAplicado > 0) msg += `%0ADESCUENTO: -$${descuentoAplicado}%0A`;
    
    msg += `%0ATotal Final: $${totalFinal}%0A%0A¬øMe podr√≠an proporcionar los m√©todos de pago?`;

    // 4. Abrir WhatsApp
    window.open(`https://wa.me/527206181781?text=${msg}`);
}

        function filterProducts() {
            const input = document.getElementById('productSearch').value.toLowerCase();
            const cards = document.getElementsByClassName('product-card');
            for (let card of cards) {
                const title = card.getElementsByTagName('h3')[0].innerText.toLowerCase();
                card.classList.toggle('hidden', !title.includes(input));
            }
        }

        function showProductDetails(name, info) {
            document.getElementById('detailName').innerText = name;
            document.getElementById('detailInfo').innerText = info;
            openModal('detailsModal');
        }

        function openModal(id) { document.getElementById(id).style.display = "block"; }
        function closeModal(id) { document.getElementById(id).style.display = "none"; }
        window.onclick = function(e) { if(e.target.className === 'modal') e.target.style.display = "none"; }
        window.onload = renderizarProductos;
    </script>
</body>
</html>